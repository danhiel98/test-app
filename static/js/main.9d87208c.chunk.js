(this["webpackJsonptest-app"]=this["webpackJsonptest-app"]||[]).push([[0],{2168:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(28),c=a.n(o),i=(a(498),a(37)),l=a(38),s=a(41),u=a(40),d=a(281),m=(a(499),a(500),a(501),a(502),a(2170)),f=a(8),p=a.n(f),g=a(14),h=a(44),b=a(51),E=a(124),y=a(489),v=a(200),C=a(114),_=a(2184),x=m.a.Header,k=E.a.SubMenu,O=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{style:{position:"fixed",zIndex:1,width:"100%"}},r.a.createElement(v.a,null,r.a.createElement(C.a,{span:7,style:{cursor:"pointer"},onClick:this.props.goHome},"Logo"),r.a.createElement(C.a,{span:5,offset:12},r.a.createElement(E.a,{theme:"light",style:{textAlign:"right"},mode:"horizontal"},r.a.createElement(k,{title:r.a.createElement(n.Fragment,null,r.a.createElement("span",null," ",this.props.user.user.displayName?this.props.user.user.displayName:this.props.user.user.email," "),r.a.createElement(y.a,{style:{marginLeft:8},icon:r.a.createElement(_.a,null)}))},r.a.createElement(E.a.Item,{onClick:this.props.logOut,key:"user:1"},"Cerrar sesi\xf3n")))))))}}]),a}(n.Component);var w=Object(b.c)((function(e,t){return{user:e.user}}))(O),S=a(82),D=a(68),j=a.n(D),I=(a(539),D.initializeApp({apiKey:"AIzaSyB3d7zkpF_Nh9LpDhOD0Fnt_p0PwFE_H98",authDomain:"turbomega-9c7f7.firebaseapp.com",databaseURL:"https://turbomega-9c7f7.firebaseio.com",projectId:"turbomega-9c7f7",storageBucket:"turbomega-9c7f7.appspot.com",messagingSenderId:"918088120293",appId:"1:918088120293:web:994c5417055b746c2fe10c",measurementId:"G-G7S6Q94YYL"})),L=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).goHome=function(){return n.props.dispatch(Object(S.d)("/"))},n.goHome=n.goHome.bind(Object(h.a)(n)),n.logOut=n.logOut.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"logOut",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.auth().signOut().then((function(e){t.props.dispatch(Object(S.d)("/login"))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(w,{goHome:this.goHome,logOut:this.logOut})}}]),a}(r.a.Component);var F=Object(b.c)((function(e,t){return{user:e.user}}))(L),N=a(2185),M=a(2186),R=a(2187),P=a(2188),q=a(2189),V=a(2190),T=m.a.Sider,z=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={collapsed:!1},e.onCollapse=function(t){e.setState({collapsed:t})},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(T,{collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse,style:{marginTop:"65px"},theme:"light"},r.a.createElement(E.a,{theme:"light",defaultSelectedKeys:["home"],selectedKeys:[this.props.selected],mode:"inline"},r.a.createElement(E.a.Item,{key:"inicio",icon:r.a.createElement(N.a,null),onClick:this.props.goHome},"Inicio"),r.a.createElement(E.a.Item,{key:"contratos",icon:r.a.createElement(M.a,null),onClick:this.props.goContracts},"Contratos"),r.a.createElement(E.a.Item,{key:"pagos",icon:r.a.createElement(R.a,null),onClick:this.props.goPayments},"Pagos"),r.a.createElement(E.a.Item,{key:"clientes",icon:r.a.createElement(P.a,null),onClick:this.props.goClients},"Clientes"),r.a.createElement(E.a.Item,{key:"facturas",icon:r.a.createElement(q.a,null),onClick:this.props.goInvoices},"Facturaci\xf3n"),r.a.createElement(E.a.Item,{key:"mantenimientos",icon:r.a.createElement(V.a,null),onClick:this.props.goMaintenances},"Mantenimientos")))}}]),a}(n.Component),B=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).goHome=function(){return n.props.dispatch(Object(S.d)("/"))},n.goNewPayment=function(){return n.props.dispatch(Object(S.d)("/new-payment"))},n.goClients=function(){return n.props.dispatch(Object(S.d)("/clientes"))},n.goContracts=function(){return n.props.dispatch(Object(S.d)("/contratos"))},n.goPayments=function(){return n.props.dispatch(Object(S.d)("/pagos"))},n.goInvoices=function(){return n.props.dispatch(Object(S.d)("/facturas"))},n.goMaintenances=function(){return n.props.dispatch(Object(S.d)("/mantenimientos"))},n.goHome=n.goHome.bind(Object(h.a)(n)),n.goNewPayment=n.goNewPayment.bind(Object(h.a)(n)),n.goClients=n.goClients.bind(Object(h.a)(n)),n.goContracts=n.goContracts.bind(Object(h.a)(n)),n.goPayments=n.goPayments.bind(Object(h.a)(n)),n.goInvoices=n.goInvoices.bind(Object(h.a)(n)),n.goMaintenances=n.goMaintenances.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(z,{goHome:this.goHome,goNewPayment:this.goNewPayment,goClients:this.goClients,goContracts:this.goContracts,goPayments:this.goPayments,goInvoices:this.goInvoices,goMaintenances:this.goMaintenances,selected:this.props.selected})}}]),a}(n.Component);var A=Object(b.c)((function(e,t){return{user:e.user}}))(B),U=m.a.Content,Y=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{style:{minHeight:"100vh"}},r.a.createElement(F,null),r.a.createElement(m.a,{className:"site-layout"},r.a.createElement(A,{selected:this.props.location.pathname.substr(1)||"inicio"}),r.a.createElement(U,{style:{margin:"75px 16px"}},this.props.children))))}}]),a}(n.Component);function H(e){return{type:"LOG_IN",user:e}}var W=a(2178),G=a(491),$=a(2174),K=a(2175),Q=a(2180),J=a(230),Z=a(80),X=a(2191),ee=W.a.Title,te=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).signIn=function(){var t=Object(g.a)(p.a.mark((function t(a){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.usuario,r=a.clave,t.next=3,I.auth().signInWithEmailAndPassword(n,r).then((function(t){e.props.dispatch(H(t.user)),e.props.dispatch(Object(S.d)("/"))})).catch((function(e){G.b.error("Los datos ingresados son inv\xe1lidos"),console.log(e.message)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{className:"layout"},r.a.createElement(v.a,{justify:"space-around",align:"middle"},r.a.createElement(C.a,{xs:20,sm:10,md:10,lg:6,xl:5,style:{marginTop:"25vh"}},r.a.createElement(v.a,null,r.a.createElement(C.a,{span:24},r.a.createElement(ee,{style:{textAlign:"center"}},"Login"))),r.a.createElement($.a,null,r.a.createElement(K.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:this.signIn},r.a.createElement(K.a.Item,{name:"usuario",rules:[{required:!0,message:"\xa1Introduzca un nombre de usuario!"}]},r.a.createElement(Q.a,{prefix:r.a.createElement(_.a,{className:"site-form-item-icon"}),placeholder:"Nombre de usuario"})),r.a.createElement(K.a.Item,{name:"clave",rules:[{required:!0,message:"\xa1Introduzca una contrase\xf1a!"}]},r.a.createElement(Q.a,{prefix:r.a.createElement(X.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Contrase\xf1a"})),r.a.createElement(K.a.Item,null,r.a.createElement(K.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0},r.a.createElement(J.a,null,"No cerrar sesi\xf3n"))),r.a.createElement(K.a.Item,null,r.a.createElement(Z.a,{type:"primary",block:!0,htmlType:"submit",className:"login-form-button"},"Acceder"))))))))}}]),a}(n.Component);var ae=Object(b.c)((function(e,t){return{user:e.user}}))(te),ne=a(2182),re=$.a.Meta,oe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(v.a,{gutter:24},r.a.createElement(C.a,{lg:6},r.a.createElement($.a,{bordered:!1,bodyStyle:{padding:"45px 40px"},style:{cursor:"pointer"},onClick:this.props.goContracts},r.a.createElement(ne.b,null,r.a.createElement(M.a,{style:{fontSize:"64px"}}),r.a.createElement(re,{title:r.a.createElement(n.Fragment,null,r.a.createElement("span",{style:{fontSize:"20px"}}," Contratos ")),description:"Lista de contratos"})))),r.a.createElement(C.a,{lg:6},r.a.createElement($.a,{bordered:!1,bodyStyle:{padding:"45px 40px"},style:{cursor:"pointer"},onClick:this.props.goPayments},r.a.createElement(ne.b,null,r.a.createElement(R.a,{style:{fontSize:"64px"}}),r.a.createElement(re,{title:r.a.createElement(n.Fragment,null,r.a.createElement("span",{style:{fontSize:"20px"}}," Pagos ")),description:"Pagos de clientes"})))),r.a.createElement(C.a,{lg:6},r.a.createElement($.a,{bordered:!1,bodyStyle:{padding:"45px 40px"},style:{cursor:"pointer"},onClick:this.props.goClients},r.a.createElement(ne.b,null,r.a.createElement(P.a,{style:{fontSize:"64px"}}),r.a.createElement(re,{title:r.a.createElement(n.Fragment,null,r.a.createElement("span",{style:{fontSize:"20px"}}," Clientes ")),description:"Lista de clientes"})))),r.a.createElement(C.a,{lg:6},r.a.createElement($.a,{bordered:!1,bodyStyle:{padding:"45px 40px"},style:{cursor:"pointer"},onClick:this.props.goMaintenances},r.a.createElement(ne.b,null,r.a.createElement(V.a,{style:{fontSize:"64px"}}),r.a.createElement(re,{title:r.a.createElement(n.Fragment,null,r.a.createElement("span",{style:{fontSize:"20px"}}," Mantenimientos ")),description:"Ver mantenimientos"})))))}}]),a}(n.Component),ce=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).goClients=function(){return n.props.dispatch(Object(S.d)("/clientes"))},n.goContracts=function(){return n.props.dispatch(Object(S.d)("/contratos"))},n.goPayments=function(){return n.props.dispatch(Object(S.d)("/pagos"))},n.goMaintenances=function(){return n.props.dispatch(Object(S.d)("/mantenimientos"))},n.goClients=n.goClients.bind(Object(h.a)(n)),n.goContracts=n.goContracts.bind(Object(h.a)(n)),n.goPayments=n.goPayments.bind(Object(h.a)(n)),n.goMaintenances=n.goMaintenances.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(oe,{goClients:this.goClients,goContracts:this.goContracts,goPayments:this.goPayments,goMaintenances:this.goMaintenances})}}]),a}(r.a.Component);var ie=Object(b.c)((function(e,t){return{user:e.user}}))(ce),le=a(2177),se=a(2181),ue=a(134),de=a(2179),me=a(2193),fe=a(2192),pe=a(2194),ge=a(89),he=a(2173),be=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={pagination:{position:"bottom"},columns:n.props.columnas,data:n.props.datos,bordered:!1,loading:n.props.loading,size:"default",title:function(){return n.props.titulo},showHeader:!0,top:"none",bottom:"bottonRight"},n}return Object(l.a)(a,[{key:"render",value:function(){var e=Object.assign({},this.state),t=e.columns.map((function(e){return Object(ge.a)({},e)}));return r.a.createElement(he.a,Object.assign({},this.state,{pagination:{size:"small",defaultPageSize:20,position:["none","topRight"]},columns:t,dataSource:e.data,size:"small"}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a={};return e.loading!==t.loading&&(a.loading=e.loading),e.data!==t.data&&(a.data=e.data),a}}]),a}(r.a.Component),Ee=a(20),ye=a(2183),ve=a(276),Ce=a(4);Ce.b.register({family:"Courier New",src:"".concat("/test-app","/cour.ttf")}),Ce.b.register({family:"Courier New Bold",src:"".concat("/test-app","/courbd.ttf")});var _e=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],xe=function(e){return new Intl.NumberFormat("es-SV",{style:"currency",currency:"USD"}).format(e)},ke=Ce.e.create({mainContainer:{marginTop:22,marginLeft:2,right:-2},firstBaseContainer:{borderWidth:.4,borderColor:"#000",marginTop:23,paddingTop:5,paddingBottom:10},baseContainer:{borderWidth:.4,borderColor:"#000",marginTop:-1,paddingTop:5,paddingBottom:10},absoluteVertical:{position:"absolute",marginTop:-12,marginLeft:-5,height:230,borderWidth:.3,borderStyle:"dashed",borderColor:"#000"},entryContainer:{marginTop:5,marginLeft:108,marginRight:7,borderWidth:1,borderColor:"#000",borderRadius:4,padding:5,paddingRight:0},cardContainer:{flexDirection:"row",marginTop:1},leftColumn:{display:"flex",flexDirection:"row",width:320},rightColumn:{flexDirection:"column",width:157,marginTop:-6,padding:5,paddingTop:8,borderLeft:1,borderBottom:1,borderColor:"#000"},flowFlex:{flexDirection:"row"},barcode:{height:45,width:200,marginLeft:5,marginTop:10},barcodeText:{fontSize:10,marginLeft:35,width:140,marginTop:58,position:"absolute"},title:{fontSize:10,textDecoration:"none",lineHeight:1.2,fontWeight:"bold",marginTop:5,width:190},subtitle:{fontSize:8,fontWeight:"bold",width:190,textAlign:"center"},textNumeroCuota:{fontSize:11,color:"black",lineHeight:1.2,fontWeight:"bold",width:100,textAlign:"right"},numeroCuota:{fontSize:11.5,fontFamily:"Courier New Bold",color:"black",lineHeight:1.2,textAlign:"center",width:30},datoPago:{fontSize:11,color:"black",lineHeight:1.6,textDecoration:"none",width:72},valorPago:{fontSize:10,color:"black",textDecoration:"none",width:68,height:14,border:1,paddingLeft:10,borderColor:"#000"},fechaVencimiento:{fontSize:9,color:"red",textDecoration:"none",width:95},customerContainer:{display:"flex",flexDirection:"row"},field:{fontSize:11,marginTop:0,color:"black",textDecoration:"none",width:45,textAlign:"left"},duiField:{fontSize:11,marginTop:7,color:"black",lineHeight:1.3,textDecoration:"none",width:25,textAlign:"left"},value:{fontFamily:"Courier New",fontSize:11,padding:2,width:230,height:20,paddingLeft:5,border:1,borderColor:"#000"},duiValue:{fontFamily:"Courier New",fontSize:11,padding:2,width:110,height:20,paddingLeft:5,border:1,borderColor:"#000",marginTop:5},leftDataColumn:{display:"flex",flexDirection:"row",width:240},rightDataColumn:{border:1,height:140,width:235}}),Oe=function(e){var t,a,n,o,c=e.cuota,i=e.cliente,l=e.dui,s=e.tipo;return r.a.createElement(Ce.g,{break:c.next,style:c.next?ke.firstBaseContainer:ke.baseContainer},r.a.createElement(Ce.g,{style:ke.entryContainer},r.a.createElement(Ce.g,{style:ke.absoluteVertical}),r.a.createElement(Ce.g,{style:ke.cardContainer},r.a.createElement(Ce.g,{style:ke.leftColumn},r.a.createElement(Ce.f,{style:{width:90,height:40}},"Logo"),r.a.createElement(Ce.g,{style:{paddingLeft:5}},r.a.createElement(Ce.f,{style:ke.title},"Pago de Servicio de Internet Residencial"),r.a.createElement(Ce.g,{style:ke.flowFlex},r.a.createElement(Ce.f,{style:ke.textNumeroCuota},"Cuota N\xb0:"),r.a.createElement(Ce.f,{style:ke.numeroCuota},(n=c.id,o=3,String(n).padStart(o,"0")))),r.a.createElement(Ce.f,{style:ke.subtitle},s.toUpperCase()))),r.a.createElement(Ce.g,{style:ke.rightColumn},r.a.createElement(Ce.g,{style:ke.flowFlex},r.a.createElement(Ce.f,{style:ke.datoPago},"Vencimiento: "),r.a.createElement(Ce.f,{style:ke.fechaVencimiento},(a=(a=c.fecha_pago).toDate(),"".concat(a.getDate(),"-").concat(_e[a.getMonth()],"-").concat(a.getFullYear())))),r.a.createElement(Ce.g,{style:ke.flowFlex},r.a.createElement(Ce.f,{style:ke.datoPago},"Pago Puntual: "),r.a.createElement(Ce.f,{style:ke.valorPago},xe(c.cantidad)," ")),r.a.createElement(Ce.g,{style:ke.flowFlex},r.a.createElement(Ce.f,{style:ke.datoPago},"Pago Tard\xedo: "),r.a.createElement(Ce.f,{style:ke.valorPago},xe(c.cantidad+3)," ")))),r.a.createElement(Ce.g,{style:ke.cardContainer},r.a.createElement(Ce.g,{style:ke.leftDataColumn},r.a.createElement(Ce.g,null,r.a.createElement(Ce.g,{style:ke.customerContainer},r.a.createElement(Ce.f,{style:ke.field},"Cliente: ")),r.a.createElement(Ce.g,{style:ke.customerContainer},r.a.createElement(Ce.f,{style:ke.value},i)),r.a.createElement(Ce.g,{style:ke.customerContainer},r.a.createElement(Ce.f,{style:ke.duiField},"DUI: "),r.a.createElement(Ce.f,{style:ke.duiValue},l)),r.a.createElement(Ce.g,{style:ke.customerContainer},r.a.createElement(Ce.c,{style:ke.barcode,src:"https://bwipjs-api.metafloor.com/?bcid=code128&text=".concat(c.codigo,"&scale=2")}),r.a.createElement(Ce.f,{style:ke.barcodeText},(t=c.codigo,"".concat(t.substr(0,4)," ").concat(t.substr(4,4)," ").concat(t.substr(8,4)," ").concat(t.substr(12,4)," ").concat(t.substr(16,4))))),r.a.createElement(Ce.g,{style:ke.customerContainer},r.a.createElement(Ce.f,{style:{fontSize:8.2,marginTop:20}},"Evita recargos haciendo tus pagos dentro de la fecha establecida")))),r.a.createElement(Ce.g,null,r.a.createElement(Ce.g,{style:ke.rightDataColumn})))))},we=function(e){var t=e.contrato,a=e.cuotas,n=e.tipo,o=[];return o=function(e){for(var t=[],a=[],n=!1,r=Math.ceil(e.length/3),o=0;o<3*r;o+=r)a.push(e.slice(o,o+r));for(var c=0;c<r;c++){for(var i=0;i<3;i++)a[i][c]&&t.push(Object(ge.a)(Object(ge.a)({},a[i][c]),{},{next:n})),n=!1;n=!0}return t}(a),r.a.createElement(Ce.a,null,r.a.createElement(Ce.d,{size:"LETTER",style:{flexDirection:"row"},wrap:!0},r.a.createElement(Ce.g,{style:ke.mainContainer},o.map((function(e){return r.a.createElement(Oe,{key:e.id,cuota:e,cliente:t.cliente,dui:t.dui_cliente,tipo:n})})))))},Se=a(325);Ce.b.register({family:"Calibri Light",src:"".concat("/test-app","/calibril.ttf")}),Ce.b.register({family:"Calibri Bold",src:"".concat("/test-app","/calibrib.ttf")});var De={year:"numeric",month:"long"},je=function(e){return e.toDate().toLocaleString("es-SV",De)},Ie=Ce.e.create({body:{paddingTop:5,paddingBottom:65,paddingHorizontal:35,fontFamily:"Calibri Light"},header:{marginHorizontal:10,marginBottom:20,display:"flex",flexDirection:"row"},headerImage:{width:100,height:45,opacity:"0.6"},headerText:{fontSize:9,marginLeft:"auto",paddingVertical:15,marginRight:0,opacity:"0.6"},title:{marginVertical:5,fontSize:14,fontFamily:"Calibri Bold",textAlign:"center",textDecoration:"underline"},textContainer:{marginTop:15,marginHorizontal:48,flexWrap:"wrap",flexDirection:"row"},text:{fontSize:11,textAlign:"justify"},textValue:{fontFamily:"Calibri Bold",textDecoration:"underline"},subtitle:{width:"100%",fontSize:11,marginVertical:14,fontFamily:"Calibri Bold",textDecoration:"underline"},listContainer:{marginVertical:8,marginLeft:20,flexDirection:"row"},sublistContainer:{marginVertical:6,marginLeft:40,flexDirection:"row"},orderedListContainer:{marginVertical:5,marginLeft:55,flexDirection:"row"},otherListContainer:{marginVertical:5,marginLeft:75,flexDirection:"row"},itemDecoration:{fontSize:11,width:18},listItem:{width:"100%",fontSize:11,fontFamily:"Calibri Bold"},sublistItem:{fontSize:11},orderedListItem:{fontSize:11},signContainer:{marginTop:100,marginHorizontal:45,flexDirection:"row"},signItem:{fontFamily:"Calibri Light",fontSize:10,width:250,marginRight:10,flexDirection:"col"}}),Le=function(e){var t,a=e.contrato,n=e.cliente;return r.a.createElement(Ce.a,null,r.a.createElement(Ce.d,{size:"LETTER",style:Ie.body,wrap:!0},r.a.createElement(Ce.g,{style:Ie.header,fixed:!0},r.a.createElement(Ce.f,null,"Logo de negocio"),r.a.createElement(Ce.f,{style:Ie.headerText},"Contrato de Servicios de Internet Inal\xe1mbrico")),r.a.createElement(Ce.f,{style:Ie.title},"CONTRATO DE PRESTACI\xd3N DE SERVICIOS DE INTERNET INAL\xc1MBRICO"),r.a.createElement(Ce.g,{style:Ie.textContainer},r.a.createElement(Ce.f,{style:Ie.text},"Se hace constar por el presente Contrato, la prestaci\xf3n de servicios de conexi\xf3n a internet via inal\xe1mbrica que suscriben por una parte a:\xa0",r.a.createElement(Ce.f,{style:Ie.textValue},"[Nombre]"),", identificado con DUI: N\xb0\xa0",r.a.createElement(Ce.f,{style:Ie.textValue},"[DUI]"),", y N\xb0 DE REGISTRO TRIBUTARIO:\xa0",r.a.createElement(Ce.f,{style:Ie.textValue},"[NIT]"),", inscrito en el Registro de Contribuyentes, con domicilio en\xa0",r.a.createElement(Ce.f,{style:Ie.textValue},"[Direcci\xf3n]"),", a quien en adelante se llamar\xe1\xa0",r.a.createElement(Ce.f,{style:Ie.textValue},"EL PROVEEDOR"),", por la otra parte,\xa0",r.a.createElement(Ce.f,{style:Ie.textValue},a.cliente),"\xa0con N\xb0 de DUI:\xa0",r.a.createElement(Ce.f,{style:Ie.textValue},a.dui_cliente),", y con n\xfamero de identificaci\xf3n tributaria (NIT):\xa0",r.a.createElement(Ce.f,{style:Ie.textValue},n.nit),", con domicilio en\xa0",r.a.createElement(Ce.f,{style:Ie.textValue},n.direccion),", a quien en adelante se llamar\xe1\xa0",r.a.createElement(Ce.f,{style:Ie.textValue},"EL CLIENTE"),"\xa0 en los t\xe9rminos y condiciones siguientes:"),r.a.createElement(Ce.f,{style:Ie.subtitle},"PRIMERO"),r.a.createElement(Ce.g,{style:Ie.listContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"\xbb"),r.a.createElement(Ce.f,{style:Ie.listItem},"PARTES INVOLUCRADAS")),r.a.createElement(Ce.g,{style:Ie.sublistContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"\u2022"),r.a.createElement(Ce.f,{style:Ie.sublistItem},"EL PROVEEDOR, es un comerciante especializado en brindar servicios de ",r.a.createElement(Ce.f,{style:{textDecoration:"underline"}},"INTERNET INALAMBRICO"))),r.a.createElement(Ce.g,{style:Ie.sublistContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"\u2022"),r.a.createElement(Ce.f,{style:Ie.sublistItem},"EL CLIENTE es un consumidor cuyo objeto es el uso personal del servicio")),r.a.createElement(Ce.f,{style:Ie.subtitle},"SEGUNDO"),r.a.createElement(Ce.g,{style:Ie.listContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"\xbb"),r.a.createElement(Ce.f,{style:Ie.listItem},"TIPO DE SERVICIO")),r.a.createElement(Ce.f,{style:Ie.text},"El objeto del presente contrato es pactar entre el\xa0",r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"EL PROVEEDOR"),"\xa0y\xa0",r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"EL CLIENTE"),"\xa0 la contrataci\xf3n del servicio remunerado espec\xedfico siguiente:"),r.a.createElement(Ce.g,{style:Ie.sublistContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"\u2022"),r.a.createElement(Ce.f,{style:Ie.sublistItem},"Servicios de conexi\xf3n de internet a traves de red inalambrica, utilizando equipo de \xfaltima tecnolog\xeda.")),r.a.createElement(Ce.f,{style:Ie.subtitle},"TERCERO"),r.a.createElement(Ce.g,{style:Ie.listContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"\xbb"),r.a.createElement(Ce.f,{style:Ie.listItem},"VIGENCIA Y TIPO DE PRESTACI\xd3N")),r.a.createElement(Ce.f,{style:Ie.text},"El presente contrato tendr\xe1 vigencia desde\xa0",r.a.createElement(Ce.f,{style:Ie.textValue},je(a.fecha_inicio)),"\xa0hasta\xa0",r.a.createElement(Ce.f,{style:Ie.textValue},je(a.fecha_fin)),", brindando el proveedor una velocidad de conexi\xf3n inal\xe1mbrica de\xa0",r.a.createElement(Ce.f,{style:Ie.textValue},Se.default(a.velocidad,!1),"\xa0Megabits (",a.velocidad,") Mbps.")),r.a.createElement(Ce.f,{style:Ie.subtitle},"CUARTO"),r.a.createElement(Ce.g,{style:Ie.listContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"\xbb"),r.a.createElement(Ce.f,{style:Ie.listItem},"CUOTAS")),r.a.createElement(Ce.f,{style:Ie.text},"La prestaci\xf3n pactada de com\xfan acuerdo que\xa0",r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"EL CLIENTE"),"\xa0se compromete a pagar durante Diesiocho cuotas al\xa0",r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"PROVEEDOR"),", es de\xa0",r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},Se.default(a.precio_cuota)," am\xe9ricanos (",(t=a.precio_cuota,new Intl.NumberFormat("es-SV",{style:"currency",currency:"USD"}).format(t)),")"),", en concepto de pago por los servicios de conexi\xf3n a internet inal\xe1mbrico."),r.a.createElement(Ce.f,{style:Ie.subtitle},"QUINTO"),r.a.createElement(Ce.g,{style:Ie.listContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"\xbb"),r.a.createElement(Ce.f,{style:Ie.listItem},"OBLIGACIONES")),r.a.createElement(Ce.f,{style:Ie.text},"Sin perjuicio de otras obligaciones expresamente estipuladas y/o derivadas del presente contrato, las partes tienen las siguientes obligaciones principales:"),r.a.createElement(Ce.g,{style:Ie.sublistContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"\u2022"),r.a.createElement(Ce.f,{style:Ie.listItem},"PROVEEDOR:")),r.a.createElement(Ce.g,{style:Ie.orderedListContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"1."),r.a.createElement(Ce.f,{style:Ie.orderedListItem},"Se compromete a brindar el equipo tecnol\xf3gico necesario para la prestaci\xf3n del servicio de conexi\xf3n inalambrica a internet.")),r.a.createElement(Ce.g,{style:Ie.orderedListContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"2."),r.a.createElement(Ce.f,{style:Ie.orderedListItem},"Brindar el servicio de internet mensualmente para un numero de equipos ilimitados conectados simultaneamente (Telefonos, tablet, laptop y/o computadoras de escritorio) de uso personal")),r.a.createElement(Ce.g,{style:Ie.orderedListContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"3."),r.a.createElement(Ce.f,{style:Ie.orderedListItem},"Se compromete a prestar el servicio de soporte en forma diligente, para lo cual podr\xe1 valerse de personal calificado.")),r.a.createElement(Ce.g,{style:Ie.orderedListContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"4.")),r.a.createElement(Ce.f,{style:Ie.orderedListItem},r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"En caso de presentar fallas en el servicio, habr\xe1 un lapso de 3 dias h\xe1biles para su reparaci\xf3n despu\xe9s de haber hecho el reporte de falla."))),r.a.createElement(Ce.g,{style:Ie.orderedListContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"5.")),r.a.createElement(Ce.f,{style:Ie.orderedListItem},r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"En caso de fallas por desastres Naturales en los lugares de repetici\xf3n la fecha de reparaci\xf3n sera indifinidad."))),r.a.createElement(Ce.g,{style:Ie.sublistContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"\u2022"),r.a.createElement(Ce.f,{style:Ie.listItem},"CLIENTE:")),r.a.createElement(Ce.g,{style:Ie.orderedListContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"1."),r.a.createElement(Ce.f,{style:Ie.orderedListItem},"Se compromete a cancelar el precio mensual contemplado en el presente contrato, en la ubicaci\xf3n asignada para ello, as\xed como las fechas destinadas.")),r.a.createElement(Ce.g,{style:Ie.otherListContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"a."),r.a.createElement(Ce.f,{style:Ie.orderedListItem},"El servicio se cancelar\xe1 mensualmente durante los ",a.cant_cuotas," meses de vigencia del contrato entre los dias  1 y 3 de cada mes, en  la Agencia de: BANCO PROMERICA, sucursal Zacatecoluca, ubicado una cuadra abajo de La Curacao")),r.a.createElement(Ce.g,{style:Ie.orderedListContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"2."),r.a.createElement(Ce.f,{style:Ie.orderedListItem},"Cumplir con las clausulas que lo comprometen como USUARIO de los servicios de internet prestados por EL PROVEEDOR que estan suscritas en este contrato.")),r.a.createElement(Ce.g,{style:Ie.orderedListContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"3."),r.a.createElement(Ce.f,{style:Ie.orderedListItem},"El Cliente esta en la obligacion de desconectar los equipos de la energia, cuando hayan tormentas electricas, esto debido a que los equipos son sencibles a descargas electricas (Rayos) para evitar que estos se quemen, de no acatar este punto y el equipo se le da\xf1e sera total responsabilidad del CLIENTE reponer el equipo para poder darle continuidad al contrato.")),r.a.createElement(Ce.g,{style:Ie.orderedListContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"4."),r.a.createElement(Ce.f,{style:Ie.orderedListItem},"Cuidar de los equipos instalados en su residencia o lugar de la prestaci\xf3n del servicio de conexion a internet, ya que son ",r.a.createElement(Ce.f,{style:Ie.textValue},"PROPIEDAD DE EL PROVEEDOR."))),r.a.createElement(Ce.g,{style:Ie.orderedListContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"5.")),r.a.createElement(Ce.f,{style:Ie.orderedListItem},r.a.createElement(Ce.f,{style:Ie.textValue},"Por ningun motivo el CLIENTE, puede mover de lugar y/o trasladar los equipos a otra residencia, la encargada de traslados es unica y exclusivamente la EMPRESA."))),r.a.createElement(Ce.f,{style:Ie.subtitle},"SEXTO"),r.a.createElement(Ce.g,{style:Ie.listContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"\xbb"),r.a.createElement(Ce.f,{style:Ie.listItem},"PENALIDADES")),r.a.createElement(Ce.g,{style:Ie.sublistContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"a)"),r.a.createElement(Ce.f,{style:Ie.sublistItem},"Queda establecido que si por cualquier motivo,\xa0",r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"EL CLIENTE"),"\xa0decidiera\xa0",r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"romper \xf3 cancelar"),"\xa0el presente contrato, el importe equivalente a cancelar sera del\xa0",r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"50% del tiempo restante estipulado en el contrato."))),r.a.createElement(Ce.g,{style:Ie.sublistContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"b)"),r.a.createElement(Ce.f,{style:Ie.sublistItem},"En caso que\xa0",r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"EL CLIENTE"),"\xa0no cancelara en las fechas antes estipuladas, pagar\xe1 un recargo o mora de $3.00 dolares, por cada cuota retrazada.")),r.a.createElement(Ce.g,{style:Ie.sublistContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"c)")),r.a.createElement(Ce.f,{style:Ie.sublistItem},r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"En caso de que EL CLIENTE se retrazara en el pago mensual El PROVEEDOR realizar\xe1 la suspensi\xf3n de los servicios de internet despues de cinco dias de espera del pago mensual acordado por parte del CLIENTE, contados a partir del dia 3 de cada mes especificamente a partir del dia 8 y podr\xe1 reestablecerlo, hasta que  EL CLIENTE cumpla con el pago mensual + la mora correspondiente."))),r.a.createElement(Ce.g,{style:Ie.sublistContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"d)")),r.a.createElement(Ce.f,{style:Ie.sublistItem},r.a.createElement(Ce.f,{style:Ie.textValue},"En el caso de el periodo en que el cliente est\xe9 desconectado de los servicios de internet por causa de incumplimiento de pago, no ser\xe1 responsabilidad del PROVEEDOR, por lo cual, EL CLIENTE pagar\xe1 normalmente los periodos posteriores, aun si el servicio est\xe9 inactivo por causa de incumplimiento de pago, este seguir\xe1 contando de forma normal las siguientes cuotas."))),r.a.createElement(Ce.g,{style:Ie.sublistContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"e)"),r.a.createElement(Ce.f,{style:Ie.sublistItem},"En caso de perdida o robo del equipo instalado, sera responsabilidad de\xa0",r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"EL CLIENTE"),"\xa0reponerlo,\xa0",r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"cancelando $30.00 por el Router Wifi y $ 125.00 por la antena receptora"),", teniendo la opci\xf3n de cancelar dicha sumatoria en un solo pago o en cuotas cargadas de forma equitativa entre el total de meses restantes al contrato.")),r.a.createElement(Ce.g,{style:Ie.sublistContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"f)"),r.a.createElement(Ce.f,{style:Ie.sublistItem},"En caso que\xa0",r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"EL CLIENTE"),"\xa0decidiera cambiar de lugar el punto de conexi\xf3n, este cancelar\xe1 un total de $15.00 dolares americanos en concepto de traslado siempre y cuando el\xa0",r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"PROVEEDOR"),"\xa0brinde cobertura en la nueva zona, en caso que el proveedor no brinde cobretra el contrato sera cancelado automaticamente.")),r.a.createElement(Ce.g,{style:Ie.sublistContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"g)")),r.a.createElement(Ce.f,{style:Ie.sublistItem},r.a.createElement(Ce.f,{style:Ie.textValue},"En caso que el cliente mueva o traslade los equipos a otra vivienda, la empresa impondra una multa de $75.00 por matipulacion de dichos equipos sin previo aviso y podr\xedaa ser suspendido definitivamente en ambas viviendas."))),r.a.createElement(Ce.f,{style:Ie.subtitle},"S\xc9PTIMO"),r.a.createElement(Ce.g,{style:Ie.listContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"\xbb"),r.a.createElement(Ce.f,{style:Ie.listItem},"TERMINACI\xd3N DEL CONTRATO")),r.a.createElement(Ce.g,{style:Ie.sublistContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"a)"),r.a.createElement(Ce.f,{style:Ie.sublistItem},"Al finalizar las fechas estipuladas de duraci\xf3n del presente contrato, quedar\xe1 a disposici\xf3n del cliente, cancelar el contrato o continuar con los servicios y firmar una nueva contrataci\xf3n de los mismos con el PROVEEDOR para un nuevo periodo.")),r.a.createElement(Ce.g,{style:Ie.sublistContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"b)"),r.a.createElement(Ce.f,{style:Ie.sublistItem},"Todo el equipo instalado en la residencia de\xa0",r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"EL CLIENTE"),"\xa0para la conexi\xf3n a internet inal\xe1mbrica, es propiedad de\xa0",r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"EL PROVEEDOR"),", por lo tanto en caso de cancelaci\xf3n o finalizaci\xf3n de contrato, EL PROVEEDOR esta en todo el derecho de retirar el equipo que haya sido instalado para la prestaci\xf3n del servicio y el CLIENTE en la obligaci\xf3n de entregarlo.")),r.a.createElement(Ce.g,{style:Ie.sublistContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration},"c)"),r.a.createElement(Ce.f,{style:Ie.sublistItem},r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},"EL CLIENTE"),", no podr\xe1 transferir de forma total o parcial las obligaciones que asume en este contrato, y tendr\xe1 responsabilidad directa y exclusiva por el cumplimiento del mismo.")),r.a.createElement(Ce.f,{style:Ie.subtitle},"OCTAVO"),r.a.createElement(Ce.g,{style:Ie.sublistContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration}),r.a.createElement(Ce.f,{style:Ie.sublistItem},"Para los efectos de cualquier comunicaci\xf3n que las partes deseen dirigirse, se\xf1alan como sus domicilios los consignados en la parte introductoria del presente documento, oblig\xe1ndose a notificar la una a la otra, cualquier variaci\xf3n de los mismos, con una anticipaci\xf3n de por lo menos quince (15) d\xedas h\xe1biles.")),r.a.createElement(Ce.g,{style:Ie.sublistContainer},r.a.createElement(Ce.f,{style:Ie.itemDecoration}),r.a.createElement(Ce.f,{style:Ie.sublistItem},"Todo litigio o controversia, derivados o relacionados con este contrato, ser\xe1 resuelto mediante tribunales, de conformidad con los Reglamentos de los mismos, a cuyas normas, administraci\xf3n y decisi\xf3n se someten las partes en forma incondicional, declarando conocerlas y aceptarlas en su integridad.")),r.a.createElement(Ce.g,{style:{marginVertical:10,width:"100%"}}),r.a.createElement(Ce.f,{style:Ie.text},"Ambas partes declaran su conformidad con las cl\xe1usulas que anteceden, suscribiendo el presente documento en"),r.a.createElement(Ce.g,{style:{marginVertical:15,width:"100%"}}),r.a.createElement(Ce.f,{style:Ie.text},"Zacatecoluca, a los\xa0",r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},a.fecha_ingreso.toDate().getDate()),"\xa0d\xedas del mes\xa0",r.a.createElement(Ce.f,{style:{fontFamily:"Calibri Bold"}},je(a.fecha_ingreso),"."))),r.a.createElement(Ce.g,{style:Ie.signContainer},r.a.createElement(Ce.g,{style:Ie.signItem},r.a.createElement(Ce.f,null,"F.___________________________________________"),r.a.createElement(Ce.f,null,"Proveedor: ",r.a.createElement(Ce.f,{style:Ie.textValue},"[Nombre]")),r.a.createElement(Ce.f,null,"DUI: ",r.a.createElement(Ce.f,{style:Ie.textValue},"[DUI]"))),r.a.createElement(Ce.g,{style:Ie.signItem},r.a.createElement(Ce.f,null,"F.___________________________________________"),r.a.createElement(Ce.f,null,"Cliente: ",r.a.createElement(Ce.f,{style:Ie.textValue},a.cliente)),r.a.createElement(Ce.f,null,"DUI: ",r.a.createElement(Ce.f,{style:Ie.textValue},n.dui))))))},Fe=function(e){return"string"!==typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)},Ne=function(e){var t={color:"#000"};switch(e){case"activo":t.color="#15d733";break;case"inactivo":t.color="#f67a2c";break;case"finalizado":t.color="#3388f5"}return t},Me=function(e){return Fe(new Date(1e3*e.seconds).toLocaleDateString("es-SV",{year:"numeric",month:"short"}))},Re=function(){var e=Object(g.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.next=3,t.get().then((function(e){e.exists&&(a=e.data())}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(g.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,t.get().then((function(e){e.forEach((function(e){a.push(Object(ge.a)({id:e.id},e.data()))}))}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=function(e){var t=e.codigoContrato,a=Object(n.useState)(!0),o=Object(Ee.a)(a,2),c=o[0],i=o[1],l=Object(n.useState)(!0),s=Object(Ee.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)({}),f=Object(Ee.a)(m,2),h=f[0],b=f[1],E=Object(n.useState)([]),y=Object(Ee.a)(E,2),_=y[0],x=y[1];Object(n.useEffect)((function(){d(!0),i(!0);var e=I.firestore().collection("contratos").doc(t);Re(e).then((function(e){return b(e)})).finally((function(){return i(!1)})),Pe(e.collection("cuotas")).then((function(e){return x(e)})).finally((function(){return d(!1)}))}),[t]);var k,O,w=function(e){Object(Ce.h)(we({contrato:h,cuotas:_,tipo:e})).toBlob().then((function(t){var a=window.URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.setAttribute("download","Talonario ".concat(h.codigo," (").concat(e,").pdf")),n.click()})).catch((function(e){console.log(e)}))},S=function(){var e=Object(g.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.next=3,t.ref_cliente.get().then((function(e){return a=e.data()})).catch((function(e){G.b.error("\xa1Ocurri\xf3 un error al obtener la informaci\xf3n del cliente!")}));case 3:if(a){e.next=5;break}return e.abrupt("return");case 5:Object(Ce.h)(Le({contrato:t,cliente:a})).toBlob().then((function(e){var a=window.URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.setAttribute("download","Contrato ".concat(t.codigo,".pdf")),n.click()})).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(le.a,{key:"detail-modal",visible:e.visible,onCancel:e.handleCancel,width:800,title:r.a.createElement("div",null,"Detalle de Contrato\xa0",!c&&r.a.createElement("span",{style:Ne(h.estado)},"(",h.estado,")")),footer:r.a.createElement(r.a.Fragment,null)},r.a.createElement(v.a,null,r.a.createElement(C.a,{flex:7},r.a.createElement($.a,{title:r.a.createElement(ne.b,null,r.a.createElement("strong",null," ",t," "),r.a.createElement(ue.a,{title:"Descargar documento"},r.a.createElement("strong",null,r.a.createElement(fe.a,{key:"download",onClick:function(){return S(h)},style:{color:"#389e0d"}})))),bodyStyle:{height:325}},!c&&r.a.createElement("div",null,"Cliente: ",r.a.createElement("strong",null,h.cliente),r.a.createElement("br",null),"Dui cliente:"," ",r.a.createElement("strong",null,h.dui_cliente)," ",r.a.createElement("br",null),"IP:"," ",r.a.createElement("strong",null,"192.168.",h.red,".",h.ip),r.a.createElement("br",null),"Precio de cuota:"," ",r.a.createElement("strong",null,(O=h.precio_cuota,new Intl.NumberFormat("es-SV",{style:"currency",currency:"USD"}).format(O))),r.a.createElement("br",null),"Cant. Cuotas:"," ",r.a.createElement("strong",null,h.cant_cuotas),r.a.createElement("br",null),"Fecha de inicio:"," ",r.a.createElement("strong",null,Me(h.fecha_inicio)),r.a.createElement("br",null),"Fecha de fin:"," ",r.a.createElement("strong",null,Me(h.fecha_fin)),r.a.createElement("br",null),"Registrado por:"," ",r.a.createElement("strong",null,(k=h.usuario,Fe(k.split("@")[0])))))),r.a.createElement(C.a,{flex:16,offset:1},r.a.createElement($.a,{title:r.a.createElement(ne.b,null,r.a.createElement("strong",null,"Cuotas"),!u&&r.a.createElement(ne.b,null,r.a.createElement(ue.a,{title:"Descargar original"},r.a.createElement(fe.a,{key:"downloadOriginal",onClick:function(){return w("original")},style:{color:"#389e0d"}})),r.a.createElement(ue.a,{title:"Descargar copia"},r.a.createElement(fe.a,{key:"downloadCopia",onClick:function(){return w("copia - cliente")},style:{color:"#e1a61b"}})))),bodyStyle:{height:325,overflowY:"scroll"}},r.a.createElement(ye.b,{dataSource:_,renderItem:function(e){return r.a.createElement(ye.b.Item,{key:e.codigo},r.a.createElement(ye.b.Item.Meta,{title:r.a.createElement("strong",null,e.id," -"," ",Me(e.fecha_pago)),description:(t=e.codigo,"".concat(t.substr(0,4)," ").concat(t.substr(4,4)," ").concat(t.substr(8,4)," ").concat(t.substr(12,4)," ").concat(t.substr(16,4)))}),r.a.createElement("div",null,e.cancelado?r.a.createElement("span",{style:{color:"#389e0d"}},"Cancelado"):r.a.createElement("span",{style:{color:"#f5222d"}},"Pendiente")));var t}}),u&&r.a.createElement("div",{className:"loading-container"},r.a.createElement(ve.a,null))))),!c&&"inactivo"===h.estado&&r.a.createElement("div",null,r.a.createElement(v.a,{justify:"center",style:{marginTop:10}},r.a.createElement(C.a,{flex:24,style:{textAlign:"center"}},r.a.createElement("strong",null,"Motivo de inactividad:"))),r.a.createElement(v.a,{justify:"center"},r.a.createElement(C.a,{flex:24,style:{textAlign:"center"}},h.motivo_inactivo))))},Ve=function(e){return"string"!==typeof(t=new Date(1e3*e.seconds).toLocaleDateString("es-SV",{year:"numeric",month:"short"}))?t:t.charAt(0).toUpperCase()+t.slice(1);var t},Te=function(){var e=Object(g.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.next=3,t.get().then((function(e){e.exists&&(a=e.data())}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(g.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,t.get().then((function(e){e.forEach((function(e){a.push(Object(ge.a)({id:e.id},e.data()))}))}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(e){var t=e.codigoCliente,a=Object(n.useState)(!0),o=Object(Ee.a)(a,2),c=o[0],i=o[1],l=Object(n.useState)(!0),s=Object(Ee.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)({}),f=Object(Ee.a)(m,2),p=f[0],g=f[1],h=Object(n.useState)([]),b=Object(Ee.a)(h,2),E=b[0],y=b[1];return Object(n.useEffect)((function(){d(!0),i(!0);var e=I.firestore().collection("clientes").doc(t),a=I.firestore().collection("contratos").where("ref_cliente","==",e);Te(e).then((function(e){return g(e)})).finally((function(){return i(!1)})),ze(a).then((function(e){return y(e)})).finally((function(){return d(!1)}))}),[t]),r.a.createElement(le.a,{key:"detail-modal",visible:e.visible,onCancel:e.handleCancel,width:800,title:r.a.createElement("div",null,"Detalle de Cliente"),footer:r.a.createElement(r.a.Fragment,null)},r.a.createElement(v.a,null,r.a.createElement(C.a,{flex:7,style:{maxWidth:395}},r.a.createElement($.a,{title:r.a.createElement(ne.b,null,r.a.createElement("strong",null," Cliente ")),bodyStyle:{height:250}},!c&&r.a.createElement("div",null,"Nombre: ",r.a.createElement("strong",null,"".concat(p.nombre," ").concat(p.apellido)),r.a.createElement("br",null),"DUI: ",r.a.createElement("strong",null,p.dui),r.a.createElement("br",null),"NIT: ",r.a.createElement("strong",null,p.nit),r.a.createElement("br",null),"Tel\xe9fono: ",r.a.createElement("strong",null,p.telefono),r.a.createElement("br",null),"Direcci\xf3n: ",r.a.createElement("strong",null,p.direccion),r.a.createElement("br",null)))),r.a.createElement(C.a,{flex:16,offset:1},r.a.createElement($.a,{title:r.a.createElement(ne.b,null,r.a.createElement("strong",null,"Contratos"),r.a.createElement(ue.a,{title:"Registrar contrato"},r.a.createElement("a",{href:"#/contratos",target:"_blank",style:{fontSize:12,margin:"0 8px"}},"Nuevo"))),bodyStyle:{height:250,overflowY:"auto"}},r.a.createElement(ye.b,{dataSource:E,renderItem:function(e){return r.a.createElement(ye.b.Item,{key:e.id},r.a.createElement(ye.b.Item.Meta,{title:r.a.createElement("strong",null,e.codigo),description:"".concat(Ve(e.fecha_inicio)," - ").concat(Ve(e.fecha_fin))}),r.a.createElement("div",null,e.estado))}}),u&&r.a.createElement("div",{className:"loading-container"},r.a.createElement(ve.a,null))))))},Ae=a(192),Ue=a.n(Ae),Ye=function(){var e=Object(g.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.next=3,t.get().then((function(e){e.exists&&(a=e.data())}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),He=function(e){var t=K.a.useForm(),a=Object(Ee.a)(t,1)[0],o=e.codigoContrato,c=Object(n.useState)(!0),i=Object(Ee.a)(c,2),l=i[0],s=i[1],u=Object(n.useState)(null),d=Object(Ee.a)(u,2),m=d[0],f=d[1],p=Object(n.useState)(!1),g=Object(Ee.a)(p,2),h=g[0],b=g[1],E=I.firestore();Object(n.useEffect)((function(){s(!0);var e=E.collection("contratos").doc(o);Ye(e).then((function(e){return f(e)})).finally((function(){return s(!1)}))}),[o]);return r.a.createElement(le.a,{key:"detail-modal",visible:e.visible,onCancel:e.handleCancel,title:r.a.createElement("div",null,"Dar de baja a contrato ",r.a.createElement("strong",null,o)),bodyStyle:{paddingBottom:0},footer:r.a.createElement("div",{key:"footer-options"},r.a.createElement(Z.a,{key:"submit",type:"primary",loading:h,onClick:function(){b(!0),a.validateFields().then((function(t){E.collection("contratos").doc(m.codigo).update({estado:"inactivo",motivo_inactivo:t.motivo}).then((function(){G.b.success("\xa1Se inhabilit\xf3 el contrato correctamente!"),e.handleCancel()}))})).catch((function(e){console.log("Validate Failed:",e)})).finally((function(){b(!1)}))}},"Aceptar"))},!l&&r.a.createElement(K.a,{form:a},r.a.createElement(K.a.Item,{name:"motivo",label:"Motivo",requiredMark:"optional",rules:[{required:!0,message:"Debe introducir el motivo"}]},r.a.createElement(Ue.a,{placeholder:"Motivo para dar de baja al contrato"}))))},We=a(35),Ge=a.n(We),$e=le.a.confirm,Ke=Q.a.Search,Qe={year:"numeric",month:"short"},Je={year:"numeric",month:"numeric",day:"numeric"},Ze=function(e){return e?e.toDate():new Date},Xe=function(e){return"string"!==typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)},et=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t?Je:Qe;return Xe(e.toDate().toLocaleDateString("es-SV",a))},tt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).obtenerContratos=function(e){var t=[],a=n.state.busqueda;e.forEach(function(){var e=Object(g.a)(p.a.mark((function e(n){var r,o,c,i,l,s,u,d,m,f,g,h,b,E,y,v,C;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.data(),o=r.cliente,c=r.dui_cliente,i=r.estado,l=r.codigo,s=r.fecha_inicio,u=r.fecha_fin,d=r.velocidad,m=r.cant_cuotas,f=r.precio_cuota,g=r.red,h=r.ip,b=r.ref_cliente,E=r.fecha_ingreso,y=r.ultima_cuota_pagada,v=r.ultimo_mes_pagado,C=r.fecha_ultimo_mes_pagado,s=et(s),u=et(u),!a||-1!==o.toLowerCase().indexOf(a)||-1!==l.toLowerCase().indexOf(a)||-1!==s.toLowerCase().indexOf(a)||-1!==u.toLowerCase().indexOf(a)||-1!==y.toLowerCase().indexOf(a)||-1!==et(v).toLowerCase().indexOf(a)||-1!==et(C,!0).toLowerCase().indexOf(a)){e.next=5;break}return e.abrupt("return");case 5:t.push({key:n.id,cliente:o,dui_cliente:c,codigo:l,estado:i,fecha_inicio:s,fecha_fin:u,velocidad:d,cant_cuotas:m,precio_cuota:f,red:g,ip:h,ref_cliente:b,fecha_ingreso:E,ultima_cuota_pagada:y,ultimo_mes_pagado:v,fecha_ultimo_mes_pagado:C});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.setState({contratos:t,loading:!1})},n.obtenerRedes=function(e){var t=[];e.forEach((function(e){var a=e.data().numero;t.push({key:e.id,numero:a})})),n.setState({redes:t})},n.obtenerClientes=function(e){var t=[];e.forEach((function(e){var a=e.data(),n=a.dui,r=a.nombre,o=a.apellido;t.push({key:e.id,dui:n,nombre:r,apellido:o})})),n.setState({clientes:t})},n.modalDesactivarContrato=function(e){n.setState({modalDesactivar:!0,registro:e})},n.handleCancel=function(){n.setState({modalDetalle:!1,modalDetalleCliente:!1,modalDesactivar:!1})},n.irA=function(e){n.unsubscribe(),n.props.dispatch(Object(S.d)("contratos/".concat(e)))},n.verDetalle=function(e){n.setState({registro:e}),n.setState({modalDetalle:!0})},n.verDetalleCliente=function(e){n.setState({codigoCliente:e.ref_cliente.id}),n.setState({modalDetalleCliente:!0})},n.download=function(){var e=Object(g.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.next=3,t.ref_cliente.get().then((function(e){return a=e.data()})).catch((function(e){G.b.error("\xa1Ocurri\xf3 un error al obtener la informaci\xf3n del cliente!")}));case 3:if(a){e.next=5;break}return e.abrupt("return");case 5:Object(Ce.h)(Le({contrato:t,cliente:a})).toBlob().then((function(e){var a=window.URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.setAttribute("download","Contrato ".concat(t.codigo,".pdf")),n.click()})).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.columnas=n.asignarColumnas(),n.desactivar=function(){var e=Object(g.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("activo"===t.estado){e.next=3;break}return G.b.error("\xa1Este contrato no se puede desactivar!"),e.abrupt("return");case 3:a=Object(h.a)(n),$e({title:"\xbfEst\xe1 seguro que desea dar de baja a este contrato?",icon:r.a.createElement(me.a,null),content:"Desactivar contrato",okText:"S\xed",cancelText:"No",onOk:function(){a.modalDesactivarContrato(t)}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.mainRef=I.firestore(),n.refContratos=n.mainRef.collection("contratos"),n.refClientes=n.mainRef.collection("clientes"),n.refRedes=n.mainRef.collection("redes"),n.refPagos=n.mainRef.collection("pagos"),n.refMantenimientos=n.mainRef.collection("mantenimientos"),n.unsubscribe=null,n.state={loading:!0,registro:null,contratos:[],clientes:[],redes:[],modalDetalle:!1,modalDetalleCliente:!1,modalDesactivar:!1,codigoCliente:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.unsubscribe=this.refContratos.where("estado","==","activo").where("ultimo_mes_pagado","<",j.a.firestore.Timestamp.now()).orderBy("ultimo_mes_pagado","desc").onSnapshot(this.obtenerContratos),this.refClientes.orderBy("fecha_creacion","desc").onSnapshot(this.obtenerClientes),this.refRedes.orderBy("numero").onSnapshot(this.obtenerRedes)}},{key:"componentDidUpdate",value:function(e,t){}},{key:"buscar",value:function(e){var t=this;e.toLowerCase()!==this.state.busqueda&&(this.setState({loading:!0}),this.setState({busqueda:e.toLowerCase()}),this.refContratos.where("ultimo_mes_pagado","<",j.a.firestore.Timestamp.now()).orderBy("ultimo_mes_pagado","desc").get().then((function(e){return t.obtenerContratos(e)})))}},{key:"asignarColumnas",value:function(){var e=this;return[{title:"Contrato",key:"contrato",sorter:{compare:function(e,t){return e.red.toString().localeCompare(t.red.toString())}},filters:[],onFilter:function(e,t){return 0===t.codigo.indexOf(e)},render:function(t){return r.a.createElement(Z.a,{type:"link",onClick:function(){return e.verDetalle(t)}},r.a.createElement("strong",null,t.codigo))}},{title:"Cliente",key:"cliente",sorter:{compare:function(e,t){return e.cliente.localeCompare(t.cliente)}},render:function(t){return r.a.createElement(Z.a,{type:"link",onClick:function(){return e.verDetalleCliente(t)}},r.a.createElement("strong",null,t.cliente))}},{title:"Velocidad",key:"velocidad",sorter:{compare:function(e,t){return e.velocidad.toString().localeCompare(t.velocidad.toString())}},filters:[],onFilter:function(e,t){return t.velocidad===e},render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(se.a,{count:"".concat(e.velocidad," Mb"),style:{backgroundColor:"#52c41a"}}))}},{title:"Precio",key:"precio_cuota",sorter:{compare:function(e,t){return e.precio_cuota.toString().localeCompare(t.precio_cuota.toString())}},render:function(e){return r.a.createElement("strong",null,r.a.createElement("span",{style:{color:"#089D6C",fontSize:"1.2em"}},(t=e.precio_cuota,new Intl.NumberFormat("es-SV",{style:"currency",currency:"USD"}).format(t))));var t}},{title:"\xdalt. cuota pagada",key:"ultimo_mes_pagado",sorter:function(e,t){return Ge()(Ze(e.ultimo_mes_pagado)).unix()-Ge()(Ze(t.ultimo_mes_pagado)).unix()},render:function(e){return r.a.createElement("strong",null,et(e.ultimo_mes_pagado))}},{title:"# \xfaltim. cuota",key:"ultima_cuota_pagada",sorter:function(e,t){return e.ultima_cuota_pagada.localeCompare(t.ultima_cuota_pagada)},render:function(e){return r.a.createElement("strong",null,e.ultima_cuota_pagada)}},{title:"Fecha pago/cuota",key:"fecha_ultimo_mes_pagado",sorter:function(e,t){return Ge()(Ze(e.fecha_ultimo_mes_pagado)).unix()-Ge()(Ze(t.fecha_ultimo_mes_pagado)).unix()},render:function(e){return e.fecha_ultimo_mes_pagado?r.a.createElement("strong",null,et(e.fecha_ultimo_mes_pagado,!0)):"-"}},{title:"Opciones",key:"opciones",render:function(t){return r.a.createElement(ne.b,{size:"middle"},r.a.createElement(ue.a,{title:"Descargar"},r.a.createElement(fe.a,{key:"download",onClick:function(){return e.download(t)},style:{color:"#389e0d"}})),r.a.createElement(ue.a,{title:"Dar de baja"},r.a.createElement(pe.a,{onClick:function(){return e.desactivar(t)},style:{color:"#203acc"}})))}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.contratos,n=t.loading,o=t.registro,c=t.redes,i=t.codigoCliente,l=t.modalDetalle,s=t.modalDetalleCliente,u=t.modalDesactivar;return r.a.createElement("div",null,l&&r.a.createElement(qe,{visible:l,codigoContrato:o.key,handleCancel:this.handleCancel}),s&&r.a.createElement(Be,{visible:s,codigoCliente:i,handleCancel:this.handleCancel}),u&&r.a.createElement(He,{visible:u,codigoContrato:o.key,handleCancel:this.handleCancel}),r.a.createElement(de.a,{className:"site-page-header",title:"Contratos",subTitle:"Contratos con pagos pendientes",extra:[r.a.createElement(Ke,{key:"1",placeholder:"Buscar",onSearch:function(t){return e.buscar(t)},style:{width:200}})]}),!this.columnas[0].filters.length&&c.map((function(t){e.columnas[0].filters.push({text:"Red ".concat(t.numero),value:"R".concat(t.numero)})})),!this.columnas[2].filters.length&&a.map((function(e){return e.velocidad})).filter((function(e,t,a){return a.indexOf(e)===t})).sort((function(e,t){return e-t})).map((function(t){e.columnas[2].filters.push({text:"".concat(t," Mb"),value:t})})),r.a.createElement(be,{columnas:this.columnas,data:a,loading:n}))}}]),a}(n.Component);var at=Object(b.c)((function(e,t){return{user:e.user}}))(tt),nt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,null),r.a.createElement(v.a,{style:{marginTop:"10px"},gutter:24},r.a.createElement(C.a,{lg:24},r.a.createElement(at,{atrasados:!0}))))}}]),a}(n.Component),rt=a(2195),ot=a(2196),ct=function(e){var t=K.a.useForm(),a=Object(Ee.a)(t,1)[0],o=e.refCliente,c=e.refContrato,i=e.refPago,l=e.refMantenimiento,s=e.record,u=Object(n.useState)(!1),d=Object(Ee.a)(u,2),m=d[0],f=d[1];Object(n.useEffect)((function(){s?o.doc(s.key).get().then((function(e){if(e.exists){var t=e.data();a.setFieldsValue({dui:t.dui,nit:t.nit,nombre:t.nombre,apellido:t.apellido,telefono:t.telefono,direccion:t.direccion})}else console.log("No se puede obtener el registro")})):a.resetFields()}),[s,a,o]);var h=function(){f(!0),a.validateFields().then((function(t){s?E(t).then((function(){a.resetFields(),e.handleCancel()})).catch((function(e){console.log("Hubo un error al editar el registro: ".concat(e))})):b(t).then((function(){a.resetFields(),e.handleCancel()})).catch((function(e){console.log("Hubo un error al agregar el registro: ".concat(e))}))})).catch((function(e){console.log("Validate Failed:",e)})).finally((function(){f(!1)}))},b=function(){var e=Object(g.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.add({activo:!0,nombre:t.nombre,apellido:t.apellido,dui:t.dui,nit:t.nit,telefono:t.telefono,direccion:t.direccion,eliminado:!1,fecha_creacion:j.a.firestore.Timestamp.now()}).then((function(e){G.b.success("\xa1Registro insertado correctamente!")})).catch((function(e){G.b.error("Error al insertar el registro"),console.error("No se pudo agregar el registro: ".concat(e,"}"))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(g.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=o.doc(s.key)).update({nombre:t.nombre,apellido:t.apellido,dui:t.dui,nit:t.nit,telefono:t.telefono,direccion:t.direccion}).then((function(){c.where("ref_cliente","==",a).get().then((function(e){e.forEach((function(e){e.ref.update({cliente:"".concat(t.nombre," ").concat(t.apellido)})}))})),i.where("ref_cliente","==",a).get().then((function(e){e.forEach((function(e){e.ref.update({nombre_cliente:"".concat(t.nombre," ").concat(t.apellido)})}))})),l.where("ref_cliente","==",a).get().then((function(e){e.forEach((function(e){e.ref.update({nombre_cliente:"".concat(t.nombre," ").concat(t.apellido)})}))})),G.b.success("\xa1Registro actualizado correctamente!")})).catch((function(e){G.b.error("Error al editar el registro"),console.error("No se pudo editar el registro: ".concat(e))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(le.a,{key:"data-modal",visible:e.visible,title:e.title,onOk:h,onCancel:e.handleCancel,footer:[r.a.createElement("div",{key:"footer-options"},r.a.createElement(Z.a,{key:"back",onClick:e.handleCancel},"Regresar"),r.a.createElement(Z.a,{key:"submit",type:"primary",loading:m,onClick:h},"Guardar"))],width:480},r.a.createElement(K.a,{form:a},r.a.createElement(K.a.Item,{name:"nombre",label:"Nombres",requiredMark:"optional",rules:[{required:!0,message:"Introducir el nombre del cliente"}],style:{width:300}},r.a.createElement(Q.a,null)),r.a.createElement(K.a.Item,{name:"apellido",label:"Apellidos",requiredMark:"optional",rules:[{required:!0,message:"Introducir el apellido del cliente"}],style:{width:300}},r.a.createElement(Q.a,null)),r.a.createElement(K.a.Item,{name:"dui",label:"No. DUI",requiredMark:"optional",rules:[{required:!0,message:"N\xfamero de DUI requerido"}]},r.a.createElement(Q.a,{style:{width:150}})),r.a.createElement(K.a.Item,{name:"nit",label:"No. NIT",requiredMark:"optional",rules:[{required:!0,message:"N\xfamero de NIT requerido"}]},r.a.createElement(Q.a,{style:{width:150}})),r.a.createElement(K.a.Item,{name:"telefono",label:"Tel\xe9fono",requiredMark:"optional",rules:[{required:!0,message:"N\xfamero de tel\xe9fono requerido"}]},r.a.createElement(Q.a,{style:{width:150}})),r.a.createElement(K.a.Item,{name:"direccion",label:"Direcci\xf3n",requiredMark:"optional",rules:[{required:!0,message:"Introduzca la direcci\xf3n del cliente"}],style:{width:400}},r.a.createElement(Ue.a,null))))},it=Q.a.Search,lt=le.a.confirm,st=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).obtenerClientes=function(e){var t=[],a=n.state.busqueda;n.setState({loading:!0}),e.forEach((function(e){var n=e.data(),r=n.dui,o=n.nit,c=n.nombre,i=n.apellido,l=n.direccion,s=n.telefono;a&&-1===c.toLowerCase().indexOf(a)&&-1===i.toLowerCase().indexOf(a)&&-1===l.toLowerCase().indexOf(a)&&-1===s.toLowerCase().indexOf(a)&&-1===o.indexOf(a)&&-1===r.indexOf(a)||t.push({key:e.id,ref:e.ref,nombre:"".concat(c," ").concat(i),dui:r,nit:o,direccion:l,telefono:s})})),n.setState({clientes:t,loading:!1})},n.columnas=n.asignarColumnas(),n.modalData=function(e){n.setState({visible:!0,registro:e})},n.confirmEliminar=function(e){var t=Object(h.a)(n);lt({title:"\xbfEst\xe1 seguro que desea eliminar este registro?",icon:r.a.createElement(me.a,null),content:"Eliminar informaci\xf3n de cliente",okText:"S\xed",cancelText:"No",onOk:function(){t.eliminarCliente(e)}})},n.contratosCliente=function(){var e=Object(g.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){n.refContrato.where("ref_cliente","==",t.ref).limit(1).get().then((function(t){return e(t.size)})).catch((function(e){return a(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.eliminarCliente=function(e){n.refCliente.doc(e.key).delete().then((function(){return G.b.success("Se elimin\xf3 el registro")})).catch((function(e){return G.b.error("Ocurri\xf3 un error")}))},n.eliminar=function(){var e=Object(g.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G.b.loading("Verificando..."),n.contratosCliente(t).then((function(e){G.b.destroy(),0===e?n.confirmEliminar(t):1===e&&G.b.error("No se puede eliminar este cliente porque ya tiene contratos")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleCancel=function(){n.setState({visible:!1,registro:null,modalDetalle:!1})},n.verDetalle=function(e){n.setState({registro:e}),n.setState({modalDetalle:!0})},n.mainRef=I.firestore(),n.refCliente=n.mainRef.collection("clientes"),n.refContrato=n.mainRef.collection("contratos"),n.refPago=n.mainRef.collection("pagos"),n.refMantenimiento=n.mainRef.collection("mantenimientos"),n.state={busqueda:"",loading:!0,clientes:[],visible:!1,visibleDelete:!1,registro:null,modalDetalle:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.refCliente.orderBy("fecha_creacion","desc").onSnapshot(this.obtenerClientes)}},{key:"buscar",value:function(e){var t=this;e!==this.state.busqueda&&(this.setState({busqueda:e}),this.refCliente.orderBy("fecha_creacion","desc").get().then((function(e){return t.obtenerClientes(e)})))}},{key:"asignarColumnas",value:function(){var e=this;return[{title:"DUI",key:"dui",sorter:function(e,t){return e.dui.localeCompare(t.dui)},render:function(t){return r.a.createElement(Z.a,{type:"link",onClick:function(){return e.verDetalle(t)}},r.a.createElement("strong",null,t.dui))}},{title:"NIT",key:"nit",sorter:function(e,t){return e.nit.localeCompare(t.nit)},render:function(e){return r.a.createElement("strong",null,e.nit)}},{title:"Nombre",key:"nombre",sorter:function(e,t){return e.nombre.localeCompare(t.nombre)},render:function(e){return r.a.createElement("span",null,e.nombre)}},{title:"Tel\xe9fono",key:"telefono",sorter:function(e,t){return e.telefono.localeCompare(t.telefono)},render:function(e){return r.a.createElement("span",null,e.telefono)}},{title:"Direcci\xf3n",key:"direccion",sorter:function(e,t){return e.direccion.localeCompare(t.direccion)},render:function(e){return r.a.createElement("span",null,e.direccion)}},{title:"Opciones",key:"opciones",render:function(t){return r.a.createElement(ne.b,{align:"center"},r.a.createElement(ue.a,{title:"Editar"},r.a.createElement(rt.a,{onClick:function(){return e.modalData(t)},style:{color:"#fa8c16"}})),r.a.createElement(ue.a,{title:"Eliminar"},r.a.createElement(ot.a,{onClick:function(){return e.eliminar(t)},style:{color:"#f5222d"}})))}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.registro,o=t.clientes,c=t.loading,i=t.modalDetalle;return r.a.createElement("div",null,r.a.createElement(ct,{visible:a,title:n?"Editar informaci\xf3n":"Agregar cliente",handleCancel:this.handleCancel,record:n,refCliente:this.refCliente,refContrato:this.refContrato,refPago:this.refPago,refMantenimiento:this.refMantenimiento}),r.a.createElement(be,{titulo:r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{justify:"space-between"},r.a.createElement(C.a,{span:4},r.a.createElement("strong",null,"Lista de clientes")),r.a.createElement(C.a,{span:6,offset:4},r.a.createElement(ne.b,null,r.a.createElement(it,{placeholder:"Buscar",onSearch:function(t){return e.buscar(t)},style:{width:200}}),r.a.createElement(Z.a,{type:"primary",ghost:!0,onClick:function(){return e.modalData()}},"Nuevo"))))),columnas:this.columnas,data:o,loading:c}),i&&r.a.createElement(Be,{visible:i,codigoCliente:n.key,handleCancel:this.handleCancel}))}}]),a}(n.Component),ut=a(271),dt=a(228),mt=a(2176),ft=a(2172),pt=(a(442),a(135)),gt=dt.a.Option,ht=function(e){var t=K.a.useForm(),a=Object(Ee.a)(t,1)[0],o=e.fireRef,c=e.record,i=e.clientes,l=e.user,s=Object(n.useState)(!1),u=Object(Ee.a)(s,2),d=u[0],m=u[1],f=Object(n.useState)(null),h=Object(Ee.a)(f,2),b=h[0],E=h[1],y=Object(n.useState)(null),_=Object(Ee.a)(y,2),x=_[0],k=_[1],O=Object(n.useState)(null),w=Object(Ee.a)(O,2),S=w[0],D=w[1],L=Object(n.useState)(null),F=Object(Ee.a)(L,2),N=F[0],M=F[1],R=Object(n.useState)(18),P=Object(Ee.a)(R,2),q=P[0],V=P[1],T=Object(n.useState)(null),z=Object(Ee.a)(T,2),B=z[0],A=z[1],U=Object(n.useState)(null),Y=Object(Ee.a)(U,2),H=Y[0],W=Y[1],$=I.firestore(),J=$.collection("contratos"),X=$.collection("pagos"),ee=$.collection("clientes"),te=$.collection("ips");Object(n.useEffect)((function(){c?o.doc(c.key).get().then(function(){var t=Object(g.a)(p.a.mark((function t(n){var r,o,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.exists){t.next=22;break}if(o=0,"activo"===(c=n.data()).estado){t.next=7;break}return G.b.error("No se puede editar este contrato porque no est\xe1 activo"),e.handleCancel(),t.abrupt("return");case 7:return t.next=9,X.where("codigo_contrato","==",c.codigo).get().then((function(e){o=e.size})).catch((function(e){return console.log(e)}));case 9:if(!(o>0)){t.next=13;break}return G.b.error("No se puede editar este contrato porque ya se realizaron pagos"),e.handleCancel(),t.abrupt("return");case 13:return E(c.red),k(c.ip),A(Ge()(c.fecha_inicio.toDate())),W(Ge()(c.fecha_fin.toDate())),t.next=19,c.ref_cliente.get().then((function(e){r=e}));case 19:a.setFieldsValue({id_cliente:r.id,velocidad:c.velocidad,precio_cuota:c.precio_cuota,red:c.red,ip:c.ip,cuotas:c.cant_cuotas,fecha_inicio:Ge()(c.fecha_inicio.toDate())}),t.next=23;break;case 22:console.log("No se puede obtener el registro");case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):a.resetFields()}),[c,i,a,o]);var ae=function(e,t){return String(e).padStart(t,"0")},ne=function(){var e=Object(g.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.doc(t).update({libre:a}).catch((function(e){throw e}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),re=function(){var t=Object(g.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!0),t.next=3,a.validateFields().then(function(){var t=Object(g.a)(p.a.mark((function t(n){var r,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(se()){t.next=3;break}return m(!1),t.abrupt("return");case 3:return r="",ee=ee.doc(n.id_cliente),t.next=7,ee.get().then((function(e){var t=e.data();r={id:e.id,dui:t.dui,nombre:t.nombre,apellido:t.apellido,ref:e.ref}})).catch((function(e){throw e}));case 7:(o={estado:"activo",eliminado:!1,dui_cliente:r.dui,cliente:"".concat(r.nombre," ").concat(r.apellido),cant_cuotas:n.cuotas,precio_cuota:n.precio_cuota,velocidad:n.velocidad,ref_cliente:r.ref,ultima_cuota_pagada:null,ultimo_mes_pagado:null,fecha_ultimo_mes_pagado:null,usuario:l.email}).codigo=c?c.codigo:"R".concat(n.red,"-").concat(ae(n.ip,3),"-").concat(B.format("MMYY"),"-").concat(H.format("MMYY")),c||(o.fecha_ingreso=j.a.firestore.Timestamp.now(),o.red=n.red,o.ip=Number(n.ip),o.fecha_inicio=new Date(B),o.fecha_fin=new Date(H)),c?ce(o,r,n).then((function(){G.b.success("\xa1Registro editado correctamente!"),a.resetFields(),e.handleCancel()})).catch((function(e){console.log("Hubo un error al editar el registro: ".concat(e))})):oe(o).then((function(){G.b.success("\xa1Se agreg\xf3 el contrato correctamente!"),a.resetFields(),e.handleCancel()})).catch((function(e){console.log("Hubo un error al agregar el registro: ".concat(e))}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e),G.b.warning("\xa1Verifique la informaci\xf3n ingresada!")})).finally((function(){m(!1)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),oe=function(){var e=Object(g.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J.doc("".concat(t.codigo)).set(t).then((function(){var e=new Date(B),a=t.codigo.split("-"),n=Number.parseInt(a[0].substr(1));e.setMonth(e.getMonth()-1);for(var r=1;r<=q;r++){var o={codigo:"".concat(ae(n,4),"0").concat(a[1]).concat(t.codigo.substr(8,4)).concat(t.codigo.substr(13,4)).concat(ae(r,4)),cantidad:t.precio_cuota,fecha_pago:new Date(e.setMonth(e.getMonth()+1)),cancelado:!1};J.doc("".concat(t.codigo)).collection("cuotas").doc("".concat(ae(r,2))).set(o)}})).then((function(e){ne("".concat(t.red,"-").concat(t.ip),!1)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(g.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.doc(t.codigo),e.next=3,r.update({dui_cliente:a.dui,cliente:"".concat(a.nombre," ").concat(a.apellido),precio_cuota:n.precio_cuota,velocidad:n.velocidad,ref_cliente:a.ref}).then(function(){var e=Object(g.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.codigo===c.codigo){e.next=3;break}return e.next=3,o.doc(c.codigo).delete();case 3:if(t.red===c.red&&t.ip===c.ip){e.next=8;break}return e.next=6,ne("".concat(c.red,"-").concat(c.ip),!0);case 6:return e.next=8,ne("".concat(t.red,"-").concat(t.ip),!1);case 8:console.log("El registro fue actualizado");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("No se pudo editar el registro: ".concat(e))}));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ie=r.a.createElement(K.a.Item,{name:"red",noStyle:!0},r.a.createElement(dt.a,{style:{width:70},placeholder:"Red",onSelect:function(e){E(e),x&&se()},disabled:c},e.redes.map((function(e){return r.a.createElement(gt,{key:e.key,value:e.numero},e.numero)})))),se=function(){var e=Object(g.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D("validating"),M(null),e.prev=2,b){e.next=5;break}throw new Error("Seleccione la red");case 5:if(x){e.next=7;break}throw new Error("Introduzca la direccion IP");case 7:if(!(x<=0||x>=255||isNaN(x))){e.next=9;break}throw new Error("La IP ingresada no es v\xe1lida");case 9:return e.next=11,te.doc("".concat(b,"-").concat(x)).get().then((function(e){if(e.exists){if(e.data().libre||c&&c.ip===x)return D("success"),M(null),!0;throw new Error("La IP ya est\xe1 en uso")}throw new Error("La IP ingresada no es v\xe1lida")})).catch((function(e){throw e}));case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),D("error"),M(e.t0.message);case 17:return e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(le.a,{key:"data-modal",visible:e.visible,title:r.a.createElement(r.a.Fragment,null,e.title,"\xa0",c&&r.a.createElement("span",null,"(",r.a.createElement("strong",null,c.codigo),")")),onOk:re,onCancel:e.handleCancel,footer:[r.a.createElement("div",{key:"footer-options"},r.a.createElement(Z.a,{key:"back",onClick:e.handleCancel},"Regresar"),r.a.createElement(Z.a,{key:"submit",type:"primary",loading:d,onClick:re},"Guardar"))]},r.a.createElement(K.a,{form:a,initialValues:Object(ut.a)({},"cuotas",q)},r.a.createElement(v.a,null,r.a.createElement(C.a,{span:17},r.a.createElement(K.a.Item,{name:"id_cliente",label:"Cliente",rules:[{required:!0,message:"Seleccione un cliente"}],requiredMark:"optional"},r.a.createElement(dt.a,{placeholder:"Seleccione un cliente",style:{width:245},allowClear:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},e.clientes.map((function(e){return r.a.createElement(gt,{key:e.key,value:e.key},"".concat(e.nombre," ").concat(e.apellido))}))))),r.a.createElement(C.a,{span:7},r.a.createElement(ue.a,{title:"Nuevo cliente"},r.a.createElement("a",{href:"#/clientes",target:"_blank",style:{margin:"0 8px"}},"Registrar cliente")))),r.a.createElement(v.a,null,r.a.createElement(C.a,{span:10},r.a.createElement(K.a.Item,{name:"velocidad",label:"Velocidad",rules:[{required:!0,message:"Requerido"}],requiredMark:"optional"},r.a.createElement(mt.a,{min:1,max:100,step:1,placeholder:"Velocidad",formatter:function(e){return"".concat(e,"Mb")},parser:function(e){return e.replace(/(M|b)/g,"")}}))),r.a.createElement(C.a,{span:10,offset:1},r.a.createElement(K.a.Item,{name:"precio_cuota",label:"$ Cuota",rules:[{required:!0,message:"Requerido"}],requiredMark:"optional"},r.a.createElement(mt.a,{step:.01,min:15,max:100,placeholder:"Cuota",formatter:function(e){return"$ ".concat(e," ").replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|\s|(,*)/g,"")}})))),r.a.createElement(K.a.Item,{name:"ip",label:"Red/IP",requiredMark:"optional",rules:[{required:!0,message:"Seleccione la IP"}],hasFeedback:!0,validateStatus:S,help:N},r.a.createElement(Q.a,{disabled:c,addonBefore:ie,onChange:function(e){return k(e.target.value)},style:{width:200},placeholder:"IP",onBlur:se})),r.a.createElement(K.a.Item,{name:"cuotas",label:"# Cuotas",rules:[{required:!0,message:"Requerido"}],requiredMark:"optional"},r.a.createElement(mt.a,{min:1,max:100,step:1,placeholder:"Cant. cuotas",onBlur:function(e){var t=e.target.value;if(W(null),V(t),B&&t){var a=Ge()(B.get());W(a.add(t-1,"M"))}},disabled:c})),r.a.createElement(v.a,null,r.a.createElement(C.a,{span:12},r.a.createElement(K.a.Item,{name:"fecha_inicio",label:"Fecha de inicio",rules:[{required:!0,message:"Fecha requerida"}],requiredMark:"optional"},r.a.createElement(ft.a,{placeholder:"Fecha de inicio",picker:"month",format:"MMMM-YYYY",locale:pt.a,disabledDate:function(e){return e&&e<Ge()().subtract(1,"y")},onChange:function(e){if(A(null),W(null),e&&q){e.set("date",3),A(e);var t=Ge()(e.get());W(t.add(q-1,"M"))}},disabled:c}))),r.a.createElement(C.a,{span:10,offset:1},H&&r.a.createElement("span",null,"Fecha fin: ",r.a.createElement("strong",null,H.format("MMMM-YYYY")))))))},bt=le.a.confirm,Et=Q.a.Search,yt={year:"numeric",month:"short"},vt=function(e){return"string"!==typeof(t=e.toDate().toLocaleDateString("es-SV",yt))?t:t.charAt(0).toUpperCase()+t.slice(1);var t},Ct=function(e){return e?e.toDate():new Date},_t=function(e){var t={color:"#000"};switch(e){case"activo":t.color="#15d733";break;case"inactivo":t.color="#f67a2c";break;case"finalizado":t.color="#3388f5"}return t},xt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).formatoDinero=function(e){return new Intl.NumberFormat("es-SV",{style:"currency",currency:"USD"}).format(e)},n.obtenerContratos=function(e){var t=[],a=n.state.busqueda;e.forEach(function(){var e=Object(g.a)(p.a.mark((function e(n){var r,o,c,i,l,s,u,d,m,f,g,h,b,E,y;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.data(),o=r.cliente,c=r.dui_cliente,i=r.estado,l=r.codigo,s=r.fecha_inicio,u=r.fecha_fin,d=r.velocidad,m=r.cant_cuotas,f=r.precio_cuota,g=r.red,h=r.ip,b=r.ref_cliente,E=r.fecha_ingreso,y=r.usuario,!a||-1!==o.toLowerCase().indexOf(a)||-1!==l.toLowerCase().indexOf(a)||-1!==vt(s).toLowerCase().indexOf(a)||-1!==vt(u).toLowerCase().indexOf(a)||-1!==y.toLowerCase().indexOf(a)){e.next=3;break}return e.abrupt("return");case 3:t.push({key:n.id,cliente:o,dui_cliente:c,codigo:l,estado:i,fecha_inicio:s,fecha_fin:u,velocidad:d,cant_cuotas:m,precio_cuota:f,red:g,ip:h,ref_cliente:b,fecha_ingreso:E,usuario:y});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.setState({contratos:t,loading:!1})},n.obtenerRedes=function(e){var t=[];e.forEach((function(e){var a=e.data().numero;t.push({key:e.id,numero:a})})),n.setState({redes:t})},n.obtenerClientes=function(e){var t=[];e.forEach((function(e){var a=e.data(),n=a.dui,r=a.nombre,o=a.apellido;t.push({key:e.id,dui:n,nombre:r,apellido:o})})),n.setState({clientes:t})},n.modalData=function(e){n.setState({visible:!0,registro:e})},n.modalDesactivarContrato=function(e){n.setState({modalDesactivar:!0,registro:e})},n.handleCancel=function(){n.setState({modalDetalle:!1,modalDetalleCliente:!1,modalDesactivar:!1,visible:!1,registro:null})},n.irA=function(e){n.unsubscribe(),n.props.dispatch(Object(S.d)("contratos/".concat(e)))},n.verDetalle=function(e){n.setState({registro:e}),n.setState({modalDetalle:!0})},n.verDetalleCliente=function(e){n.setState({codigoCliente:e.ref_cliente.id}),n.setState({modalDetalleCliente:!0})},n.download=function(){var e=Object(g.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.next=3,t.ref_cliente.get().then((function(e){return a=e.data()})).catch((function(e){G.b.error("\xa1Ocurri\xf3 un error al obtener la informaci\xf3n del cliente!")}));case 3:if(a){e.next=5;break}return e.abrupt("return");case 5:Object(Ce.h)(Le({contrato:t,cliente:a})).toBlob().then((function(e){var a=window.URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.setAttribute("download","Contrato ".concat(t.codigo,".pdf")),n.click()})).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.columnas=n.asignarColumnas(),n.confirmEliminar=function(e){var t=Object(h.a)(n);bt({title:"\xbfEst\xe1 seguro que desea eliminar este registro?",icon:r.a.createElement(me.a,null),content:"Eliminar contrato",okText:"S\xed",cancelText:"No",onOk:function(){t.eliminarContrato(e)}})},n.pagosMantenimientosContrato=function(){var e=Object(g.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){n.refPagos.where("codigo_contrato","==",t.codigo).limit(1).get().then((function(a){0===a.size?n.refMantenimientos.where("codigo_contrato","==",t.codigo).limit(1).get().then((function(t){e(t.size)})):e(a.size)})).catch((function(e){return a(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.eliminarContrato=function(e){n.refContratos.doc(e.key).delete().then((function(){n.refIPs.doc("".concat(e.red,"-").concat(e.ip)).get().then((function(e){e.ref.update({libre:!0})})),G.b.success("Se elimin\xf3 el registro")})).catch((function(e){return G.b.error("Ocurri\xf3 un error")}))},n.desactivar=function(){var e=Object(g.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("activo"===t.estado){e.next=3;break}return G.b.error("\xa1Este contrato no se puede desactivar porque no est\xe1 activo!"),e.abrupt("return");case 3:a=Object(h.a)(n),bt({title:"\xbfEst\xe1 seguro que desea dar de baja a este contrato?",icon:r.a.createElement(me.a,null),content:"Desactivar contrato",okText:"S\xed",cancelText:"No",onOk:function(){a.modalDesactivarContrato(t)}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.eliminar=function(){var e=Object(g.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G.b.loading("Verificando..."),n.pagosMantenimientosContrato(t).then((function(e){G.b.destroy(),0===e?n.confirmEliminar(t):e>=1&&G.b.error("No se puede eliminar este contrato porque ya se registraron pagos o mantenimientos")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.refContratos=I.firestore().collection("contratos"),n.refClientes=I.firestore().collection("clientes"),n.refRedes=I.firestore().collection("redes"),n.refIPs=I.firestore().collection("ips"),n.refPagos=I.firestore().collection("pagos"),n.refMantenimientos=I.firestore().collection("mantenimientos"),n.unsubscribe=null,n.state={user:e.user.user,loading:!0,contratos:[],clientes:[],redes:[],visible:!1,registro:null,modalDesactivar:!1,modalDetalle:!1,modalDetalleCliente:!1,codigoCliente:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.unsubscribe=this.refContratos.orderBy("fecha_ingreso","desc").onSnapshot(this.obtenerContratos),this.refClientes.orderBy("fecha_creacion","desc").onSnapshot(this.obtenerClientes),this.refRedes.orderBy("numero").onSnapshot(this.obtenerRedes)}},{key:"componentDidUpdate",value:function(e,t){}},{key:"buscar",value:function(e){var t=this;e.toLowerCase()!==this.state.busqueda&&(this.setState({loading:!0}),this.setState({busqueda:e.toLowerCase()}),this.refContratos.get().then((function(e){return t.obtenerContratos(e)})))}},{key:"asignarColumnas",value:function(){var e=this;return[{title:"C\xf3digo",key:"codigo",sorter:{compare:function(e,t){return e.red.toString().localeCompare(t.red.toString())}},filters:[],onFilter:function(e,t){return 0===t.codigo.indexOf(e)},render:function(t){return r.a.createElement(Z.a,{type:"link",onClick:function(){return e.verDetalle(t)}},r.a.createElement("strong",null,t.codigo))}},{title:"Cliente",key:"cliente",sorter:function(e,t){return e.cliente.localeCompare(t.cliente)},render:function(t){return r.a.createElement(Z.a,{type:"link",onClick:function(){return e.verDetalleCliente(t)}},r.a.createElement("strong",null,t.cliente))}},{title:"Velocidad",key:"velocidad",sorter:function(e,t){return e.velocidad.toString().localeCompare(t.velocidad.toString())},filters:[],onFilter:function(e,t){return t.velocidad===e},render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(se.a,{count:"".concat(e.velocidad," Mb"),style:{backgroundColor:"#52c41a"}}))}},{title:"Precio",key:"precio_cuota",sorter:function(e,t){return e.precio_cuota.toString().localeCompare(t.precio_cuota.toString())},render:function(t){return r.a.createElement("strong",null,r.a.createElement("span",{style:{color:"#089D6C",fontSize:"1.2em"}},e.formatoDinero(t.precio_cuota)))}},{title:"Fecha inicio",key:"fecha_inicio",sorter:function(e,t){return Ge()(Ct(e.fecha_inicio)).unix()-Ge()(Ct(t.fecha_inicio)).unix()},render:function(e){return r.a.createElement("span",null,vt(e.fecha_inicio))}},{title:"Fecha fin",key:"fecha_fin",sorter:function(e,t){return Ge()(Ct(e.fecha_fin)).unix()-Ge()(Ct(t.fecha_fin)).unix()},render:function(e){return r.a.createElement("span",null,vt(e.fecha_fin))}},{title:"Estado",key:"estado",filters:[{text:"Activo",value:"activo"},{text:"Finalizado",value:"finalizado"},{text:"Inactivo",value:"inactivo"}],onFilter:function(e,t){return 0===t.estado.indexOf(e)},sorter:function(e,t){return e.estado.toString().localeCompare(t.estado.toString())},render:function(e){return r.a.createElement("strong",null,r.a.createElement("span",{style:_t(e.estado)},e.estado))}},{title:"Opciones",key:"opciones",render:function(t){return r.a.createElement(ne.b,{size:"middle"},r.a.createElement(ue.a,{title:"Descargar"},r.a.createElement(fe.a,{key:"download",onClick:function(){return e.download(t)},style:{color:"#389e0d"}})),r.a.createElement(ue.a,{title:"Editar"},r.a.createElement(rt.a,{onClick:function(){return e.modalData(t)},style:{color:"#fa8c16"}})),r.a.createElement(ue.a,{title:"Dar de baja"},r.a.createElement(pe.a,{onClick:function(){return e.desactivar(t)},style:{color:"#203acc"}})),r.a.createElement(ue.a,{title:"Eliminar"},r.a.createElement(ot.a,{onClick:function(){return e.eliminar(t)},style:{color:"#f5222d"}})))}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.contratos,n=t.loading,o=t.visible,c=t.registro,i=t.clientes,l=t.redes,s=t.codigoCliente,u=t.modalDetalle,d=t.modalDetalleCliente,m=t.modalDesactivar,f=t.user;return r.a.createElement("div",null,o&&r.a.createElement(ht,{visible:o,title:c?"Editar informaci\xf3n":"Nuevo contrato",user:f,clientes:i,redes:l,handleCancel:this.handleCancel,record:c,fireRef:this.refContratos}),u&&r.a.createElement(qe,{visible:u,codigoContrato:c.key,handleCancel:this.handleCancel}),d&&r.a.createElement(Be,{visible:d,codigoCliente:s,handleCancel:this.handleCancel}),m&&r.a.createElement(He,{visible:m,codigoContrato:c.key,handleCancel:this.handleCancel}),r.a.createElement(de.a,{className:"site-page-header",title:"Contratos",subTitle:"Lista de contratos",extra:[r.a.createElement(Et,{key:"1",placeholder:"Buscar",onSearch:function(t){return e.buscar(t)},style:{width:200}}),r.a.createElement(Z.a,{key:"2",type:"primary",ghost:!0,onClick:function(){return e.modalData()}},"Nuevo")]}),!this.columnas[0].filters.length&&l.map((function(t){e.columnas[0].filters.push({text:"Red ".concat(t.numero),value:"R".concat(t.numero)})})),!this.columnas[2].filters.length&&a.map((function(e){return e.velocidad})).filter((function(e,t,a){return a.indexOf(e)===t})).sort((function(e,t){return e-t})).map((function(t){e.columnas[2].filters.push({text:"".concat(t," Mb"),value:t})})),r.a.createElement(be,{columnas:this.columnas,data:a,loading:n}))}}]),a}(n.Component);var kt=Object(b.c)((function(e,t){return{user:e.user}}))(xt),Ot=a(490),wt=a(2171),St=dt.a.Option,Dt=function(e){var t=K.a.useForm(),a=Object(Ee.a)(t,1)[0],o=e.mainRef,c=e.record,i=e.redes,l=e.user,s=o.collection("contratos"),u=o.collection("mantenimientos"),d=Object(n.useState)(null),m=Object(Ee.a)(d,2),f=m[0],h=m[1],b=Object(n.useState)(null),E=Object(Ee.a)(b,2),y=E[0],v=E[1],C=Object(n.useState)(null),_=Object(Ee.a)(C,2),x=_[0],k=_[1],O=Object(n.useState)(null),w=Object(Ee.a)(O,2),S=w[0],D=w[1],I=Object(n.useState)(null),L=Object(Ee.a)(I,2),F=L[0],N=L[1],M=Object(n.useState)(null),R=Object(Ee.a)(M,2),P=R[0],q=R[1],V=Object(n.useState)(!1),T=Object(Ee.a)(V,2),z=T[0],B=T[1];Object(n.useEffect)((function(){c?s.doc(c.codigo_contrato).get().then((function(e){if(e.exists){var t=e.data();h(t.red),v(t.ip),N(t),q(new Date(c.fecha)),a.setFieldsValue({red:t.red,ip:t.ip,fecha:Ge()(c.fecha),direccion:c.direccion,motivo:c.motivo,descripcion:c.descripcion})}})):a.resetFields()}),[c,a,o]),Object(n.useEffect)((function(){y&&W()}),[f]);var A=function(){var t=Object(g.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return B(!0),t.next=3,a.validateFields().then(function(){var t=Object(g.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W();case 2:if(t.sent){t.next=5;break}return B(!1),t.abrupt("return");case 5:c?Y(n).then((function(){a.resetFields(),e.handleCancel()})).catch((function(e){console.log("Hubo un error al editar el registro: ".concat(e))})):U(n).then((function(){a.resetFields(),e.handleCancel()})).catch((function(e){console.log("Hubo un error al agregar el registro: ".concat(e))}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log("Validate Failed:",e)})).finally((function(){B(!1)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U=function(){var e=Object(g.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.add({eliminado:!1,fecha:P,codigo_contrato:F.codigo,nombre_cliente:F.cliente,ref_cliente:F.ref_cliente,direccion:t.direccion,motivo:t.motivo,descripcion:t.descripcion,fecha_creacion:j.a.firestore.Timestamp.now(),usuario:l.email}).then((function(e){G.b.success("\xa1Registro insertado correctamente!")})).catch((function(e){G.b.error("Error al insertar el registro"),console.error(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(g.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.doc(c.key).update({fecha:P,codigo_contrato:F.codigo,nombre_cliente:F.cliente,ref_cliente:F.ref_cliente,direccion:t.direccion,motivo:t.motivo,descripcion:t.descripcion}).then((function(){G.b.success("\xa1Registro actualizado correctamente!")})).catch((function(e){G.b.error("Error al editar el registro"),console.error(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=r.a.createElement(K.a.Item,{name:"red",noStyle:!0},r.a.createElement(dt.a,{style:{width:70},placeholder:"Red",onSelect:function(e){h(e)}},i.map((function(e){return r.a.createElement(St,{key:e.key,value:e.numero},e.numero)})))),W=function(){var e=Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k("validating"),D(null),t=!1,e.prev=3,f){e.next=6;break}throw new Error("Seleccione la red");case 6:if(y){e.next=8;break}throw new Error("Introduzca la direccion IP");case 8:if(!(y<=0||y>=255||isNaN(y))){e.next=10;break}throw new Error("La IP ingresada no es v\xe1lida");case 10:return e.next=12,s.where("red","==",f).where("ip","==",y).where("eliminado","==",!1).get().then((function(e){if(N(null),k(null),0===e.size)throw new Error("No se encontr\xf3 un contrato con esos datos");e.forEach((function(e){N(e.data()),k("success"),t=!0}))})).catch((function(e){throw e}));case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),k("error"),D(e.t0.message);case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(le.a,{key:"data-modal",visible:e.visible,title:e.title,onOk:A,onCancel:e.handleCancel,footer:[r.a.createElement("div",{key:"footer-options"},r.a.createElement(Z.a,{key:"back",onClick:e.handleCancel},"Regresar"),r.a.createElement(Z.a,{key:"submit",type:"primary",loading:z,onClick:A},"Guardar"))]},r.a.createElement(K.a,{form:a},r.a.createElement(K.a.Item,{name:"ip",label:"Red/IP",requiredMark:"optional",rules:[{required:!0,message:"Seleccione la IP"}],hasFeedback:!0,validateStatus:x,help:S},r.a.createElement(Q.a,{addonBefore:H,onChange:function(e){return v(Number(e.target.value))},style:{width:200},placeholder:"IP",onBlur:W})),r.a.createElement(wt.a,{style:{margin:"7px 0"}}),r.a.createElement("span",{style:{lineHeight:2.5}},"Contrato: ",r.a.createElement("strong",null,F?F.codigo:"[Ninguno]"))," ",r.a.createElement("br",null),r.a.createElement("span",{style:{lineHeight:2.5}},"Cliente: ",r.a.createElement("strong",null,F?F.cliente:"[Ninguno]"))," ",r.a.createElement("br",null),r.a.createElement(K.a.Item,{name:"fecha",label:"Fecha",rules:[{required:!0,message:"Fecha requerida"}],requiredMark:"optional",style:{marginTop:15}},r.a.createElement(ft.a,{placeholder:"Fecha",format:"DD-MMMM-YYYY",locale:pt.a,disabledDate:function(e){return e&&(e<Ge()().subtract(1,"y")||e&&e>Ge()().endOf("day"))},onChange:function(e){q(new Date(e))},style:{width:170}})),r.a.createElement(K.a.Item,{name:"direccion",label:"Direcci\xf3n",requiredMark:"optional",rules:[{required:!0,message:"Introduzca la direcci\xf3n"}]},r.a.createElement(Q.a,{placeholder:"Direcci\xf3n donde se hizo la visita",maxLength:"80",style:{width:300}})),r.a.createElement(K.a.Item,{name:"motivo",label:"Motivo",requiredMark:"optional",rules:[{required:!0,message:"Introducir el motivo del mantenimiento"}]},r.a.createElement(Q.a,{placeholder:"Motivo de la visita",maxLength:"50",style:{width:300}})),r.a.createElement(K.a.Item,{name:"descripcion",label:"Detalles",requiredMark:"optional",rules:[{required:!0,message:"Introduzca los detalles de la visita"}]},r.a.createElement(Ue.a,{style:{width:320},placeholder:"Detalles de la visita"}))))},jt=le.a.confirm,It=Q.a.Search,Lt={year:"numeric",month:"numeric",day:"numeric"},Ft=function(e){return e?e.toDate():new Date},Nt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).obtenerMantenimientos=function(e){var t=[],a=n.state.busqueda;n.setState({loading:!0}),e.forEach((function(e){var n=e.data(),r=n.codigo_contrato,o=n.nombre_cliente,c=n.fecha,i=n.direccion,l=n.motivo,s=n.descripcion,u=n.ref_cliente;a&&-1===r.toLowerCase().indexOf(a)&&-1===o.toLowerCase().indexOf(a)&&-1===i.toLowerCase().indexOf(a)&&-1===l.toLowerCase().indexOf(a)&&-1===s.toLowerCase().indexOf(a)||t.push({key:e.id,nombre_cliente:o,codigo_contrato:r,direccion:i,motivo:l,descripcion:s,fecha:c,ref_cliente:u})})),n.setState({mantenimientos:t,loading:!1})},n.columnas=n.asignarColumnas(),n.eliminar=function(e){var t=Object(h.a)(n);jt({title:"\xbfEst\xe1 seguro que desea eliminar este registro?",icon:r.a.createElement(me.a,null),content:"Eliminar mantenimiento",okText:"S\xed",cancelText:"No",onOk:function(){t.eliminarMantenimiento(e)}})},n.eliminarMantenimiento=function(e){n.refMantenimiento.doc(e.key).delete().then((function(){return G.b.success("Se elimin\xf3 el registro")})).catch((function(e){return G.b.error("Ocurri\xf3 un error")}))},n.modalData=function(e){n.setState({visible:!0,registro:e})},n.handleCancel=function(){n.setState({visible:!1,registro:null,detalleContrato:!1,detalleCliente:!1})},n.verDetalleContrato=function(e){n.setState({codigoContrato:e}),n.setState({detalleContrato:!0})},n.verDetalleCliente=function(e){n.setState({codigoCliente:e}),n.setState({detalleCliente:!0})},n.obtenerRedes=function(e){var t=[];e.forEach((function(e){var a=e.data().numero;t.push({key:e.id,numero:a})})),n.setState({redes:t})},n.mainRef=I.firestore(),n.refMantenimiento=n.mainRef.collection("mantenimientos"),n.refRedes=n.mainRef.collection("redes"),n.state={user:e.user.user,busqueda:"",loading:!0,mantenimientos:[],visible:!1,registro:null,redes:[],codigoContrato:"",codigoCliente:"",detalleContrato:!1,detalleCliente:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.refMantenimiento.orderBy("fecha_creacion","desc").onSnapshot(this.obtenerMantenimientos),this.refRedes.orderBy("numero").onSnapshot(this.obtenerRedes)}},{key:"buscar",value:function(e){var t=this;e!==this.state.busqueda&&(this.setState({busqueda:e.toLowerCase()}),this.refMantenimiento.get().then((function(e){return t.obtenerMantenimientos(e)})))}},{key:"asignarColumnas",value:function(){var e=this;return[{title:"Contrato",key:"codigo_contrato",sorter:function(e,t){return e.codigo_contrato.substr(1).localeCompare(t.codigo_contrato.substr(1))},render:function(t){return r.a.createElement(Z.a,{type:"link",onClick:function(){return e.verDetalleContrato(t.codigo_contrato)}},r.a.createElement("strong",null,t.codigo_contrato))}},{title:"Cliente",key:"nombre_cliente",sorter:function(e,t){return e.nombre_cliente.localeCompare(t.nombre_cliente)},render:function(t){return r.a.createElement(Z.a,{type:"link",onClick:function(){return e.verDetalleCliente(t.ref_cliente.id)}},r.a.createElement("strong",null,t.nombre_cliente))}},{title:"Fecha",key:"fecha",sorter:function(e,t){return Ge()(Ft(e.fecha)).unix()-Ge()(Ft(t.fecha)).unix()},render:function(e){return r.a.createElement("strong",null,Ft(e.fecha).toLocaleString("es-SV",Lt))}},{title:"Direcci\xf3n",key:"direccion",sorter:function(e,t){return e.direccion.localeCompare(t.direccion)},render:function(e){return r.a.createElement("span",null,e.direccion)}},{title:"Motivo",key:"motivo",sorter:function(e,t){return e.motivo.localeCompare(t.motivo)},render:function(e){return r.a.createElement(Ot.a,{content:r.a.createElement("div",{style:{width:400}},e.descripcion),title:"Detalle"},e.motivo)}},{title:"Opciones",key:"opciones",render:function(t){return r.a.createElement(ne.b,{align:"center"},r.a.createElement(ue.a,{title:"Editar"},r.a.createElement(rt.a,{onClick:function(){return e.modalData(t)},style:{color:"#fa8c16"}})),r.a.createElement(ue.a,{title:"Eliminar"},r.a.createElement(ot.a,{onClick:function(){return e.eliminar(t)},style:{color:"#f5222d"}})))}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.visible,o=t.registro,c=t.mantenimientos,i=t.loading,l=t.redes,s=t.detalleContrato,u=t.detalleCliente,d=t.codigoContrato,m=t.codigoCliente;return r.a.createElement("div",null,r.a.createElement(Dt,{user:a,visible:n,title:o?"Editar informaci\xf3n":"Agregar mantenimiento",handleCancel:this.handleCancel,record:o,mainRef:this.mainRef,redes:l}),r.a.createElement(be,{titulo:r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{justify:"space-between"},r.a.createElement(C.a,{span:4},r.a.createElement("strong",null,"Lista de mantenimientos")),r.a.createElement(C.a,{span:6,offset:4},r.a.createElement(ne.b,null,r.a.createElement(It,{placeholder:"Buscar",onSearch:function(t){return e.buscar(t)},style:{width:200}}),r.a.createElement(Z.a,{type:"primary",ghost:!0,onClick:function(){return e.modalData()}},"Nuevo"))))),columnas:this.columnas,data:c,loading:i}),s&&r.a.createElement(qe,{visible:s,codigoContrato:d,handleCancel:this.handleCancel}),u&&r.a.createElement(Be,{visible:u,codigoCliente:m,handleCancel:this.handleCancel}))}}]),a}(n.Component);var Mt=Object(b.c)((function(e,t){return{user:e.user}}))(Nt),Rt=a(2197),Pt=a(2201);Ce.b.register({family:"Courier New",src:"".concat("/test-app","/cour.ttf")});var qt={year:"numeric",month:"long"},Vt={year:"numeric",month:"long",day:"numeric"},Tt=function(e){return new Intl.NumberFormat("es-SV",{style:"currency",currency:"USD"}).format(e)},zt=Ce.e.create({mainContainer:{width:380,margin:8},dateContanier:{marginTop:115,marginLeft:285},dataValue:{fontFamily:"Courier New",fontSize:11},descriptionValue:{fontFamily:"Courier New",fontSize:8.4},nameContainer:{marginTop:15,marginLeft:60},descriptionContainer:{marginTop:5,display:"flex",flexDirection:"row"},quantityColum:{marginLeft:10,width:25},divider:{marginTop:75},descriptionColumn:{width:185,paddingRight:5,textOverflow:"hidden"},unitPriceColumn:{width:40,textAlign:"center"},priceValue:{fontFamily:"Courier New",fontSize:9},taxedSalesColumn:{marginLeft:"auto",marginRight:15,width:50},finalContainer:{position:"absolute",marginTop:440,marginLeft:10,display:"flex",flexDirection:"row"},textTotalContainer:{marginLeft:20,width:180},totalsContainer:{display:"flex"},sumsContainer:{marginLeft:104,width:50,height:16,textAlign:"center"}}),Bt=function(e){var t=e.pago;return r.a.createElement(Ce.g,{style:zt.descriptionContainer},r.a.createElement(Ce.g,{style:zt.quantityColum},r.a.createElement(Ce.f,{style:zt.dataValue},"1")),r.a.createElement(Ce.g,{style:zt.descriptionColumn},r.a.createElement(Ce.f,{style:zt.descriptionValue},"Pago de servicio de internet del mes de ",function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Vt:qt;return e.toDate().toLocaleString("es-SV",t)}(t.fecha_cuota))),r.a.createElement(Ce.g,{style:zt.unitPriceColumn},r.a.createElement(Ce.f,{style:zt.priceValue},Tt(t.cantidad))),r.a.createElement(Ce.g,{style:zt.taxedSalesColumn},r.a.createElement(Ce.f,{style:zt.dataValue},Tt(t.cantidad))))},At=function(e){var t=e.factura,a=t.cuotas.filter((function(e){return e.mora_exonerada&&e.precio_mora>0})),n=t.cuotas.filter((function(e){return!e.mora_exonerada&&e.precio_mora>0})),o=n.length,c=a.length,i=null,l="",s="";return o>0&&(i={cantidad:o,precioUnitario:3,total:3*o},n.forEach((function(e,t){l+=e.fecha_cuota.toDate().toLocaleDateString("es-SV",{month:"long",year:"numeric"}),t+1<o&&(l+=", ")}))),c>0&&a.forEach((function(e,t){s+=e.fecha_cuota.toDate().toLocaleDateString("es-SV",{month:"long",year:"numeric"}),t+1<c&&(s+=", ")})),r.a.createElement(Ce.a,null,r.a.createElement(Ce.d,{size:[397,595.2],style:{flexDirection:"row"}},r.a.createElement(Ce.g,{style:zt.mainContainer},r.a.createElement(Ce.g,{style:zt.dateContanier},r.a.createElement(Ce.f,{style:zt.dataValue},t.fecha.toDate().toLocaleDateString("es-SV",{year:"numeric",month:"numeric",day:"numeric"}))),r.a.createElement(Ce.g,{style:zt.nameContainer},r.a.createElement(Ce.f,{style:zt.dataValue},t.nombre_cliente)),r.a.createElement(Ce.g,{style:zt.divider}),t.cuotas.map((function(e){return r.a.createElement(Bt,{key:e.num_cuota,pago:e})})),o>0&&r.a.createElement(Ce.g,{style:zt.descriptionContainer},r.a.createElement(Ce.g,{style:zt.quantityColum},r.a.createElement(Ce.f,{style:zt.dataValue},o)),r.a.createElement(Ce.g,{style:zt.descriptionColumn},r.a.createElement(Ce.f,{style:zt.descriptionValue},"Pago de mora de ".concat(l))),r.a.createElement(Ce.g,{style:zt.unitPriceColumn},r.a.createElement(Ce.f,{style:zt.priceValue},Tt(i.precioUnitario))),r.a.createElement(Ce.g,{style:zt.taxedSalesColumn},r.a.createElement(Ce.f,{style:zt.dataValue},Tt(i.total)))),c>0&&r.a.createElement(Ce.g,{style:zt.descriptionContainer},r.a.createElement(Ce.g,{style:zt.quantityColum},r.a.createElement(Ce.f,{style:zt.dataValue})),r.a.createElement(Ce.g,{style:zt.descriptionColumn},r.a.createElement(Ce.f,{style:zt.descriptionValue},"Mora exonerada de ".concat(s)))),r.a.createElement(Ce.g,{style:zt.finalContainer},r.a.createElement(Ce.g,{style:zt.textTotalContainer},r.a.createElement(Ce.f,{style:zt.dataValue},t.total_letras)),r.a.createElement(Ce.g,{style:zt.totalsContainer},r.a.createElement(Ce.g,{style:zt.sumsContainer},r.a.createElement(Ce.f,{style:zt.dataValue},Tt(t.total))),r.a.createElement(Ce.g,{style:zt.sumsContainer},r.a.createElement(Ce.f,{style:zt.dataValue},"-")),r.a.createElement(Ce.g,{style:zt.sumsContainer},r.a.createElement(Ce.f,{style:zt.dataValue},"-")),r.a.createElement(Ce.g,{style:zt.sumsContainer},r.a.createElement(Ce.f,{style:zt.dataValue},"-")),r.a.createElement(Ce.g,{style:zt.sumsContainer},r.a.createElement(Ce.f,{style:zt.dataValue},Tt(t.total))),r.a.createElement(Ce.g,{style:zt.sumsContainer},r.a.createElement(Ce.f,{style:zt.dataValue},"-")),r.a.createElement(Ce.g,{style:zt.sumsContainer},r.a.createElement(Ce.f,{style:zt.dataValue},Tt(t.total))))))))},Ut=a(2198),Yt=a(2199),Ht=a(2200),Wt=a(325),Gt=dt.a.Option,$t={year:"numeric",month:"long"},Kt={year:"numeric",month:"long",day:"numeric"},Qt=function(e){return new Intl.NumberFormat("es-SV",{style:"currency",currency:"USD"}).format(e)},Jt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t?Kt:$t;return e.toDate().toLocaleString("es-SV",a)},Zt=function(e,t){var a=e instanceof Date?e:e.toDate(),n=t.toDate();return a.getYear()>n.getYear()||!(a.getYear()<n.getYear())&&(a.getMonth()>n.getMonth()||!(a.getMonth()<n.getMonth())&&a.getDate()>n.getDate())},Xt=function(e){var t=K.a.useForm(),a=Object(Ee.a)(t,1)[0],o=e.record,c=e.clientes,i=e.user,l=Object(n.useState)(!1),s=Object(Ee.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(null),f=Object(Ee.a)(m,2),h=f[0],b=f[1],E=Object(n.useState)([]),y=Object(Ee.a)(E,2),_=y[0],x=y[1],k=Object(n.useState)(0),O=Object(Ee.a)(k,2),w=O[0],S=O[1],D=Object(n.useState)(0),L=Object(Ee.a)(D,2),F=L[0],N=L[1],M=Object(n.useState)(0),R=Object(Ee.a)(M,2),P=R[0],q=R[1],V=Object(n.useState)([]),T=Object(Ee.a)(V,2),z=T[0],B=T[1],A=Object(n.useState)([]),U=Object(Ee.a)(A,2),Y=U[0],H=U[1],W=Object(n.useState)(""),$=Object(Ee.a)(W,2),J=$[0],X=$[1],ee=Object(n.useState)(!1),te=Object(Ee.a)(ee,2),ae=te[0],re=te[1],oe=Object(n.useState)(null),ce=Object(Ee.a)(oe,2),ie=ce[0],se=ce[1],de=Object(n.useState)(null),me=Object(Ee.a)(de,2),fe=me[0],be=me[1],ye=I.firestore().collection("facturas"),ve=I.firestore().collection("contratos"),Ce=I.firestore().collection("pagos");Object(n.useEffect)((function(){}),[]);var _e=function(e,t){return String(e).padStart(t,"0")},xe=function(){var t=Object(g.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),t.next=3,a.validateFields().then(function(){var t=Object(g.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==z.length){t.next=3;break}return G.b.error("\xa1No hay ning\xfan pago a facturar!"),t.abrupt("return");case 3:return r={fecha:new Date(n.fecha),cantidad_pagos:z.length,cuotas:Y,mora:F,sumas:Math.round(100*P)/100,total:Math.round(100*w)/100,total_letras:Wt.default(w),eliminado:!1,codigo_contrato:h.codigo,nombre_cliente:h.cliente,ref_cliente:h.ref_cliente,fecha_creacion:j.a.firestore.FieldValue.serverTimestamp(),usuario:i.email},t.next=6,ye.add(r).then((function(t){z.forEach((function(e){e.ref.update({facturado:!0})})),G.b.success("\xa1Factura agregada correctamente!"),a.resetFields(),e.handleCancel()})).catch((function(e){G.b.error("Ha ocurrido un error"),console.log(e)}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){G.b.warning("\xa1Verifique la informaci\xf3n ingresada!")})).finally((function(){d(!1)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ke=function(){var e=Object(g.a)(p.a.mark((function e(t){var n,r,o,c,l,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.replace(/ /g,""),!/\d{20}/.test(n)){e.next=14;break}return r=!1,o=!1,c=Number.parseInt(n.substr(0,4)),l=n.substr(5,3),s="R".concat(c,"-").concat(l,"-").concat(n.substr(8,4),"-").concat(n.substr(12,4)),e.next=9,Ce.doc(n).get().then((function(e){e.exists&&(G.b.error("\xa1Esta cuota ya fue cancelada!"),r=!0)})).catch((function(e){console.log(e)}));case 9:if(!r){e.next=11;break}return e.abrupt("return");case 11:ve.doc(s).get().then(function(){var e=Object(g.a)(p.a.mark((function e(t){var r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.exists){e.next=18;break}if(r=t.data(),c=Number.parseInt(n.substr(17,4)),"activo"===r.estado){e.next=6;break}return G.b.error("No se pueden agregar pagos a este contrato"),e.abrupt("return");case 6:if(!(c>1)){e.next=15;break}return e.next=9,t.ref.collection("cuotas").doc("".concat(_e(c-1,2))).get().then((function(e){e.data().cancelado&&(o=!0)}));case 9:if(o){e.next=12;break}return G.b.error("La cuota anterior no ha sido cancelada a\xfan"),e.abrupt("return");case 12:if(c!==r.cant_cuotas){e.next=15;break}return e.next=15,t.ref.update({estado:"finalizado"});case 15:t.ref.collection("cuotas").doc("".concat(_e(c,2))).get().then((function(e){if(e.exists){var n=e.data(),o=new Date;Ce.doc(n.codigo).set({cantidad:n.cantidad,codigo_contrato:r.codigo,ref_cliente:r.ref_cliente,nombre_cliente:r.cliente,numero_cuota:e.id,fecha_cuota:n.fecha_pago,fecha_pago:o,mora:Zt(o,n.fecha_pago)?3:0,mora_exonerada:!1,facturado:!1,fecha_creacion:j.a.firestore.FieldValue.serverTimestamp(),usuario:i.email}).then((function(c){e.ref.update({cancelado:!0}).then(Object(g.a)(p.a.mark((function c(){return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return X(""),a.setFieldsValue({id_cliente:r.ref_cliente.id}),c.next=4,Se(r.ref_cliente.id);case 4:return a.setFieldsValue({id_contrato:r.codigo}),c.next=7,t.ref.update({ultima_cuota_pagada:e.id,ultimo_mes_pagado:n.fecha_pago,fecha_ultimo_mes_pagado:o});case 7:De(r.codigo),G.b.success("Pago registrado");case 9:case"end":return c.stop()}}),c)}))))})).catch((function(e){console.log(e)}))}})),e.next=19;break;case 18:G.b.error("La cuota NO existe");case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)})),e.next=15;break;case 14:G.b.warn("El formato del c\xf3digo no es v\xe1lido");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(g.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce.doc(t.key).update({mora_exonerada:!t.mora_exonerada}).then((function(){t.mora_exonerada?G.b.success("\xa1Se quit\xf3 la exoneraci\xf3n de la mora!"):G.b.success("\xa1Se exoner\xf3 la mora correctamente!"),De(t.codigo_contrato)})).catch((function(e){console.log(e),G.b.error("Ocurri\xf3 un error")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(g.a)(p.a.mark((function e(t){var a,n,r,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,n=Number.parseInt(t.numero_cuota),r=null,o=null,c=null,e.next=7,ve.doc(t.codigo_contrato).get().then(function(){var e=Object(g.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.exists){e.next=6;break}if("activo"===t.data().estado){e.next=4;break}return G.b.error("No se puede eliminar este pago porque el contrato no est\xe1 activo"),e.abrupt("return");case 4:return e.next=6,t.ref.collection("cuotas").doc(_e(n+1,2)).get().then((function(e){e.exists&&e.data().cancelado&&(a=!0)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:if(!a){e.next=10;break}return G.b.error("Primero debe eliminar los pagos m\xe1s recientes"),e.abrupt("return");case 10:return e.next=12,Ce.doc("".concat(t.key)).delete().then((function(){ve.doc(t.codigo_contrato).get().then(function(){var e=Object(g.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.exists){e.next=8;break}if(a.ref.collection("cuotas").doc(t.numero_cuota).get().then((function(e){e.exists&&e.ref.update({cancelado:!1}).then((function(){De(a.data().codigo),G.b.success("Pago eliminado")}))})),!(n>1)){e.next=5;break}return e.next=5,Ce.doc("".concat(t.key.substr(0,16)).concat(_e(n-1,4))).get().then((function(e){var t=e.data();r=t.numero_cuota,o=t.fecha_cuota,c=t.fecha_pago})).catch((function(e){console.log(e)}));case 5:a.ref.update({ultima_cuota_pagada:r,ultimo_mes_pagado:o,fecha_ultimo_mes_pagado:c}),e.next=9;break;case 8:G.b.error("La cuota NO existe");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(g.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(se("validating"),be(null),a.setFieldsValue({id_contrato:null}),B([]),x([]),t){e.next=7;break}return e.abrupt("return");case 7:if(n=[],r=c.find((function(e){return e.key===t}))){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,ve.where("ref_cliente","==",r.ref).where("estado","==","activo").get().then((function(e){e.forEach((function(e){n.push(Object(ge.a)({key:e.id},e.data()))})),x(n)}));case 13:return 0===n.length?(se("warning"),be("No se encontraton contratos")):1===n.length?(a.setFieldsValue({id_contrato:n[0].codigo}),De(n[0].codigo),se(null)):se(null),e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(g.a)(p.a.mark((function e(t){var a,n,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],n=[],r=0,o=0,q(0),N(0),S(0),H([]),B([]),b(null),t){e.next=12;break}return e.abrupt("return");case 12:return re(!0),e.next=15,ve.doc(t).get().then((function(e){b(e.data())}));case 15:return e.next=17,Ce.where("codigo_contrato","==",t).where("facturado","==",!1).get().then((function(e){e.forEach((function(e){var t=e.data();t.ref=e.ref,t.key=e.id,n.push({fecha_cuota:t.fecha_cuota,fecha_pago:t.fecha_pago,num_cuota:t.numero_cuota,precio_mora:t.mora,mora_exonerada:t.mora_exonerada,cantidad:t.cantidad}),a.push(t),r+=t.cantidad,!t.mora_exonerada&&t.fecha_pago&&Zt(t.fecha_pago,t.fecha_cuota)&&(o+=3)})),H(n),B(a),N(o),q(r),S(r+o)}));case 17:re(!1);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(e){var t=e.record,a=null,n=0;return r.a.createElement(ne.b,null,r.a.createElement(ft.a,{locale:pt.a,format:"DD-MMMM-YYYY",size:"small",onChange:function(e){a=e?new Date(e.get()):null}}),r.a.createElement(Rt.a,{onClick:function(){return e=t.key,a&&Zt(a,t.fecha_cuota)&&(n=3),void Ce.doc(e).update({fecha_pago:a,mora:n}).then((function(){G.b.success("\xa1Fecha establecida correctamente!"),De(t.codigo_contrato)}));var e},style:{color:"#389e0d"}}))},Ie=[{title:"No. Cuota",align:"center",dataIndex:"numero_cuota"},{title:"Mes",dataIndex:"fecha_cuota",render:function(e){return r.a.createElement("span",null,Jt(e))}},{title:"Fecha de pago",key:"fecha_pago",render:function(e){return r.a.createElement("span",null,r.a.createElement(v.a,{justify:"center"},r.a.createElement(C.a,null,e.fecha_pago?" ".concat(Jt(e.fecha_pago,!0)," "):"",r.a.createElement(Ot.a,{content:r.a.createElement(je,{record:e}),title:"Seleccione",trigger:"click"},r.a.createElement(Ut.a,{style:{color:"#1c86c6"}})))))}},{title:"Precio de cuota",dataIndex:"cantidad",render:function(e){return r.a.createElement("strong",null,Qt(e))}},{title:"Mora",key:"mora",render:function(e){var t={textDecoration:"none"};return e.mora_exonerada&&(t.textDecoration="line-through"),r.a.createElement(ne.b,{size:"small"},r.a.createElement("strong",{style:t},Qt(e.mora)),e.mora>0&&r.a.createElement(ue.a,{title:"Alternar exoneraci\xf3n"},r.a.createElement(Yt.a,{disabled:0===e.mora,key:"exonerate",onClick:function(){return Oe(e)},style:{color:"#2124ce"}})))}},{title:"Cant. gravada",key:"cantidad_gravada",render:function(e){var t=e.cantidad;return e.fecha_pago&&Zt(e.fecha_pago,e.fecha_cuota)&&(t+=3),r.a.createElement("strong",null,Qt(t))}},{key:"opciones",align:"center",render:function(e){return r.a.createElement(ne.b,{size:"middle"},r.a.createElement(ue.a,{title:"Cancelar"},r.a.createElement(pe.a,{key:"cancel",onClick:function(){return we(e)},style:{color:"#f5222d"}})))}}];return r.a.createElement(le.a,{key:"data-modal",visible:e.visible,title:r.a.createElement(r.a.Fragment,null,e.title,"\xa0",o&&r.a.createElement("span",null,"(",r.a.createElement("strong",null,o.codigo),")")),onOk:xe,onCancel:e.handleCancel,footer:[r.a.createElement("div",{key:"footer-options"},r.a.createElement(Z.a,{key:"back",onClick:e.handleCancel},"Regresar"),r.a.createElement(Z.a,{key:"submit",type:"primary",loading:u,onClick:xe},"Guardar"))],width:800},r.a.createElement(K.a,{form:a},r.a.createElement(v.a,null,r.a.createElement(C.a,{span:12},r.a.createElement(K.a.Item,{name:"id_cliente",label:"Cliente",rules:[{required:!0,message:"Seleccione un cliente"}],requiredMark:"optional"},r.a.createElement(dt.a,{placeholder:"Seleccione un cliente",style:{width:245},allowClear:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},onChange:function(e){return Se(e)}},c.map((function(e){return r.a.createElement(Gt,{key:e.key,value:e.key},"".concat(e.nombre," ").concat(e.apellido))}))))),r.a.createElement(C.a,{span:12},r.a.createElement(K.a.Item,{name:"id_contrato",label:"Contrato",rules:[{required:!0,message:"Seleccione un contrato"}],requiredMark:"optional",hasFeedback:!0,validateStatus:ie,help:fe},r.a.createElement(dt.a,{placeholder:"Seleccione un contrato",style:{width:245},allowClear:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},onChange:function(e){return De(e)}},_.map((function(e){return r.a.createElement(Gt,{key:e.codigo,value:e.codigo},"".concat(e.codigo))})))))),r.a.createElement(v.a,null,r.a.createElement(C.a,{span:20},r.a.createElement(K.a.Item,{name:"fecha",label:"Fecha",rules:[{required:!0,message:"Fecha requerida"}],requiredMark:"optional"},r.a.createElement(ft.a,{placeholder:"Fecha",picker:"date",format:"DD-MMMM-YYYY",locale:pt.a,onChange:function(e){},style:{width:170}})))),r.a.createElement(v.a,null,r.a.createElement(C.a,{span:9,style:{textAlign:"right"}},r.a.createElement("strong",null,"Pagos")),r.a.createElement(C.a,{span:11,offset:1},r.a.createElement(Q.a,{addonBefore:r.a.createElement(Ht.a,null),placeholder:"Codigo de cuota",style:{width:280},autoFocus:!0,maxLength:24,allowClear:!0,value:J,onChange:function(e){return X(e.target.value)},onKeyUp:function(e){13===e.keyCode&&ke(e.target.value)}}))),r.a.createElement(wt.a,null),r.a.createElement(v.a,null,r.a.createElement(C.a,{span:24},r.a.createElement(he.a,{loading:ae,columns:Ie,dataSource:z,footer:function(){return r.a.createElement(v.a,null,r.a.createElement(C.a,{style:{textAlign:"right"},span:11},r.a.createElement("strong",null,z.length," cuotas")),r.a.createElement(C.a,{style:{textAlign:"right"},span:13},r.a.createElement(ne.b,null,r.a.createElement("strong",{style:{fontSize:"1.1em"}},"Mora: ",Qt(F)),r.a.createElement("strong",{style:{fontSize:"1.1em"}},"Sumas: ",Qt(P)))))},size:"small"}))),r.a.createElement(wt.a,null),r.a.createElement(v.a,null,r.a.createElement(C.a,{span:15},r.a.createElement("strong",{style:{fontSize:"1.2em"}},"Total a Pagar: ",Qt(w))))))},ea={year:"numeric",month:"long"},ta={year:"numeric",month:"long",day:"numeric"},aa=function(e){return"string"!==typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)},na=function(e){return new Intl.NumberFormat("es-SV",{style:"currency",currency:"USD"}).format(e)},ra=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t?ta:ea;return aa(new Date(1e3*e.seconds).toLocaleDateString("es-SV",a))},oa=function(){var e=Object(g.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.next=3,t.get().then((function(e){e.exists&&(a=e.data())}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ca=function(e){var t,a=e.codigoFactura,o=Object(n.useState)({}),c=Object(Ee.a)(o,2),i=c[0],l=c[1],s=Object(n.useState)(!0),u=Object(Ee.a)(s,2),d=u[0],m=u[1];return Object(n.useEffect)((function(){m(!0);var e=I.firestore().collection("facturas").doc(a);oa(e).then((function(e){return l(e)})).finally((function(){return m(!1)}))}),[a]),r.a.createElement(le.a,{key:"detail-modal",visible:e.visible,onCancel:e.handleCancel,width:700,title:r.a.createElement("div",null,"Detalle de factura"),footer:r.a.createElement(r.a.Fragment,null)},r.a.createElement(v.a,null,r.a.createElement(C.a,{flex:7},r.a.createElement($.a,{title:r.a.createElement(ne.b,null,r.a.createElement("strong",null," ",i.codigo_contrato," "),r.a.createElement(ue.a,{title:"Descargar documento"},r.a.createElement("strong",null,r.a.createElement(fe.a,{key:"download",onClick:function(){return function(e){Object(Ce.h)(At({factura:e})).toBlob().then((function(t){var a=window.URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.setAttribute("download","Factura (".concat(e.nombre_cliente,").pdf")),n.click()})).catch((function(e){console.log(e)}))}(i)},style:{color:"#389e0d"}})))),bodyStyle:{height:325}},!d&&r.a.createElement("div",null,"Cliente:\xa0",r.a.createElement("strong",null,i.nombre_cliente),r.a.createElement("br",null),"Contrato:\xa0",r.a.createElement("strong",null,i.codigo_contrato),r.a.createElement("br",null),"Fecha:\xa0",r.a.createElement("strong",null,ra(i.fecha,!0)),r.a.createElement("br",null),"Precio de cuota:\xa0",r.a.createElement("strong",null,na(i.cuotas[0].cantidad)),r.a.createElement("br",null),"Sumas:\xa0",r.a.createElement("strong",null,na(i.sumas)),r.a.createElement("br",null),"Mora:\xa0",r.a.createElement("strong",null,na(i.mora)),r.a.createElement("br",null),"Total:\xa0",r.a.createElement("strong",null,na(i.total)),r.a.createElement("br",null),"Registrado por:\xa0",r.a.createElement("strong",null,(t=i.usuario,aa(t.split("@")[0])))))),r.a.createElement(C.a,{flex:16,offset:1},r.a.createElement($.a,{title:r.a.createElement("strong",null,"Cuotas (",i.cantidad_pagos,")"),bodyStyle:{height:325,overflowY:"scroll"}},r.a.createElement(ye.b,{dataSource:i.cuotas,renderItem:function(e){return r.a.createElement(ye.b.Item,{key:e.num_cuota},r.a.createElement(ye.b.Item.Meta,{title:r.a.createElement("strong",null,e.num_cuota," -",ra(e.fecha_cuota)),description:e.mora_exonerada?r.a.createElement("span",{style:{color:"#389e0d"}},"Mora exonerada"):0===e.precio_mora?r.a.createElement("span",null,"Mora\xa0",na(e.precio_mora)):r.a.createElement("span",{style:{color:"#f5222d"}},"Mora\xa0",na(e.precio_mora))}),r.a.createElement("div",null,r.a.createElement("strong",null,na(e.cantidad))))}})))))},ia=Q.a.Search,la=le.a.confirm,sa=I.firestore(),ua=function(e,t){return String(e).padStart(t,"0")},da=function(e){return e?e.toDate():new Date},ma=function(e){var t=e.record,a=0,n=function(){a<=0?G.b.error("Debe introducir un n\xfamero mayor a cero"):sa.collection("facturas").doc(t.key).update({numero:ua(a,6)}).then((function(){G.b.success("\xa1N\xfamero establecido correctamente!")}))};return r.a.createElement(ne.b,null,r.a.createElement(mt.a,{size:"small",min:1,max:1e5,onChange:function(e){a=e},onPressEnter:function(e){return n()}}),r.a.createElement(Rt.a,{onClick:function(){return n()},style:{color:"#389e0d"}}))},fa=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).formatoDinero=function(e){return new Intl.NumberFormat("es-SV",{style:"currency",currency:"USD"}).format(e)},n.obtenerFacturas=function(e){var t=[],a=n.state.busqueda;e.forEach(function(){var e=Object(g.a)(p.a.mark((function e(n){var r,o,c,i,l,s,u,d,m,f,g,h,b,E;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.data(),o=r.cantidad_pagos,c=r.codigo_contrato,i=r.numero,l=r.fecha,s=r.nombre_cliente,u=r.sumas,d=r.mora,m=r.mora_exonerada,f=r.total,g=r.total_letras,h=r.ref_cliente,b=r.cuotas,E=r.usuario,!a||-1!==s.toLowerCase().indexOf(a)||-1!==c.toLowerCase().indexOf(a)||-1!==g.toLowerCase().indexOf(a)||-1!==E.toLowerCase().indexOf(a)){e.next=3;break}return e.abrupt("return");case 3:t.push({key:n.id,codigo_contrato:c,nombre_cliente:s,fecha:l,cantidad_pagos:o,total:f,total_letras:g,ref_cliente:h,cuotas:b,sumas:u,mora:d,mora_exonerada:m,numero:i,usuario:E});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.setState({facturas:t,loading:!1})},n.obtenerRedes=function(e){var t=[];e.forEach((function(e){var a=e.data().numero;t.push({key:e.id,numero:a})})),n.setState({redes:t})},n.obtenerClientes=function(e){var t=[];e.forEach((function(e){var a=e.data(),n=a.dui,r=a.nombre,o=a.apellido;t.push({key:e.id,ref:e.ref,dui:n,nombre:r,apellido:o})})),n.setState({clientes:t})},n.modalData=function(e){n.setState({visible:!0,registro:e})},n.handleCancel=function(){n.setState({registro:null,modalDetalle:!1,modalDetalleCliente:!1,modalDetalleContrato:!1,codigoContrato:null,visible:!1})},n.capitalize=function(e){return"string"!==typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)},n.irA=function(e){n.unsubscribe(),n.props.dispatch(Object(S.d)("facturas/".concat(e)))},n.verDetalle=function(e){n.setState({registro:e,modalDetalle:!0})},n.verDetalleContrato=function(e){n.setState({codigoContrato:e,modalDetalleContrato:!0})},n.verDetalleCliente=function(e){n.setState({codigoCliente:e.ref_cliente.id,modalDetalleCliente:!0})},n.columnas=n.asignarColumnas(),n.download=function(e){Object(Ce.h)(At({factura:e})).toBlob().then((function(t){var a=window.URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.setAttribute("download","Factura (".concat(e.nombre_cliente,").pdf")),n.click()})).catch((function(e){console.log(e)}))},n.eliminar=function(){var e=Object(g.a)(p.a.mark((function e(t){var a,o,c,i,l,s,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cuotas[t.cuotas.length-1],o=Number.parseInt(a.num_cuota),c=!1,i=t.codigo_contrato.split("-"),l=Number.parseInt(i[0].substr(1)),s="".concat(ua(l,4),"0").concat(i[1]).concat(t.codigo_contrato.substr(8,4)).concat(t.codigo_contrato.substr(13,4)),e.next=8,n.refPagos.doc("".concat(s,"-").concat(ua(o+1,4))).get().then((function(e){e.exists&&e.data().facturado&&(c=!0)})).catch((function(e){G.b.error("Ocurri\xf3 un error al eliminar la factura"),console.log(e)}));case 8:if(!c){e.next=11;break}return G.b.error("\xa1Hay facturas m\xe1s recientes, debe eliminar esas primero!"),e.abrupt("return");case 11:u=Object(h.a)(n),la({title:"\xbfEst\xe1 seguro que desea eliminar este registro?",icon:r.a.createElement(me.a,null),content:"Eliminar informaci\xf3n de factura",okText:"S\xed",cancelText:"No",onOk:function(){u.eliminarFactura(t)}});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.eliminarFactura=function(){var e=Object(g.a)(p.a.mark((function e(t){var a,r,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.codigo_contrato.split("-"),r=Number.parseInt(a[0].substr(1)),o=Number.parseInt(a[1]),c="".concat(ua(r,4)).concat(ua(o,4)).concat(t.codigo_contrato.substr(8,4)).concat(t.codigo_contrato.substr(13,4)),n.refFacturas.doc(t.key).delete().then(Object(g.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.cuotas.forEach(function(){var e=Object(g.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.refPagos.doc("".concat(c).concat(ua(Number.parseInt(t.num_cuota),4))).get().then((function(e){e.exists&&e.ref.update({facturado:!1})})).catch((function(e){G.b.error("Ocurri\xf3 un error al eliminar la factura"),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:G.b.success("\xa1Se elimin\xf3 la factura correctamente!");case 3:case"end":return e.stop()}}),e)})))).catch((function(e){G.b.error("\xa1Ocurri\xf3 un error al eliminar la factura!")}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.mainRef=I.firestore(),n.refFacturas=n.mainRef.collection("facturas"),n.refClientes=n.mainRef.collection("clientes"),n.refRedes=n.mainRef.collection("redes"),n.refPagos=n.mainRef.collection("pagos"),n.opcFecha={year:"numeric",month:"numeric",day:"numeric"},n.unsubscribe=null,n.state={user:e.user.user,loading:!0,facturas:[],redes:[],clientes:[],visible:!1,registro:null,modalDetalle:!1,modalDetalleCliente:!1,modalDetalleContrato:!1,codigoContrato:null,codigoCliente:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.unsubscribe=this.refFacturas.orderBy("fecha_creacion","desc").onSnapshot(this.obtenerFacturas),this.refClientes.orderBy("fecha_creacion","desc").onSnapshot(this.obtenerClientes),this.refRedes.orderBy("numero").onSnapshot(this.obtenerRedes)}},{key:"buscar",value:function(e){var t=this;e.toLowerCase()!==this.state.busqueda&&(this.setState({loading:!0}),this.setState({busqueda:e.toLowerCase()}),this.refFacturas.get().then((function(e){return t.obtenerFacturas(e)})))}},{key:"asignarColumnas",value:function(){var e=this;return[{title:"Cliente",key:"cliente",sorter:function(e,t){return e.nombre_cliente.localeCompare(t.nombre_cliente)},render:function(t){return r.a.createElement(Z.a,{type:"link",onClick:function(){return e.verDetalleCliente(t)}},r.a.createElement("strong",null,t.nombre_cliente))}},{title:"Contrato",key:"codigo_contrato",sorter:function(e,t){return e.codigo_contrato.substr(1).localeCompare(t.codigo_contrato.substr(1))},filters:[],onFilter:function(e,t){return 0===t.codigo_contrato.indexOf(e)},render:function(t){return r.a.createElement(Z.a,{type:"link",onClick:function(){return e.verDetalleContrato(t.codigo_contrato)}},r.a.createElement("strong",null,t.codigo_contrato))}},{title:"No. Factura",key:"numero",render:function(e){return r.a.createElement(v.a,{justify:"center"},r.a.createElement(C.a,null,e.numero?e.numero:"-",r.a.createElement(Ot.a,{content:r.a.createElement(ma,{record:e}),title:"Seleccione",trigger:"click"},r.a.createElement(rt.a,{style:{color:"#1c86c6"}}))))}},{title:"Fecha",dataIndex:"fecha",sorter:function(e,t){return Ge()(da(e.fecha)).unix()-Ge()(da(t.fecha)).unix()},render:function(t){return r.a.createElement("strong",null,da(t).toLocaleDateString("es-SV",e.opcFecha))}},{title:"Cant. cuotas",key:"cantidad_pagos",sorter:function(e,t){return e.cantidad_pagos.toString().localeCompare(t.cantidad_pagos.toString())},align:"center",render:function(e){return r.a.createElement("strong",null,e.cantidad_pagos)}},{title:"Sumas",key:"sumas",sorter:function(e,t){return e.sumas.toString().localeCompare(t.sumas.toString())},render:function(t){return r.a.createElement("strong",null,e.formatoDinero(t.sumas))}},{title:"Mora",key:"mora",render:function(t){var a=t.mora_exonerada?0:t.mora;return r.a.createElement("strong",null,e.formatoDinero(a))}},{title:"Total",key:"total",sorter:function(e,t){return e.total.toString().localeCompare(t.total.toString())},render:function(t){return r.a.createElement("strong",null,r.a.createElement("span",{style:{color:"#089D6C",fontSize:"1.2em"}},e.formatoDinero(t.total)))}},{title:"Opciones",key:"opciones",render:function(t){return r.a.createElement(ne.b,{size:"middle"},r.a.createElement(ue.a,{title:"Detalles"},r.a.createElement(Pt.a,{key:"info",onClick:function(){return e.verDetalle(t)},style:{color:"#0d9e8a"}})),r.a.createElement(ue.a,{title:"Descargar"},r.a.createElement(fe.a,{key:"download",onClick:function(){return e.download(t)},style:{color:"#389e0d"}})),r.a.createElement(ue.a,{title:"Cancelar"},r.a.createElement(pe.a,{key:"cancel",onClick:function(){return e.eliminar(t)},style:{color:"#f5222d"}})))}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.facturas,n=t.redes,o=t.loading,c=t.visible,i=t.registro,l=t.clientes,s=t.codigoCliente,u=t.modalDetalle,d=t.modalDetalleCliente,m=t.modalDetalleContrato,f=t.codigoContrato,p=t.user;return r.a.createElement("div",null,c&&r.a.createElement(Xt,{visible:c,title:i?"Editar informaci\xf3n":"Nueva factura",user:p,clientes:l,handleCancel:this.handleCancel,record:i,fireRef:this.refContratos}),u&&r.a.createElement(ca,{visible:u,codigoFactura:i.key,handleCancel:this.handleCancel}),d&&r.a.createElement(Be,{visible:d,codigoCliente:s,handleCancel:this.handleCancel}),m&&r.a.createElement(qe,{visible:m,codigoContrato:f,handleCancel:this.handleCancel}),r.a.createElement(de.a,{className:"site-page-header",title:"Facturas",subTitle:"Lista de facturas",extra:[r.a.createElement(ia,{key:"buscar",placeholder:"Buscar",onSearch:function(t){return e.buscar(t)},style:{width:200}}),r.a.createElement(Z.a,{key:"nuevo",type:"primary",ghost:!0,onClick:function(){return e.modalData()}},"Nuevo")]}),!this.columnas[1].filters.length&&n.map((function(t){e.columnas[1].filters.push({text:"Red ".concat(t.numero),value:"R".concat(t.numero)})})),r.a.createElement(be,{columnas:this.columnas,data:a,loading:o}))}}]),a}(n.Component);var pa=Object(b.c)((function(e,t){return{user:e.user}}))(fa),ga={year:"numeric",month:"long"},ha={year:"numeric",month:"long",day:"numeric"},ba=function(e){return"string"!==typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)},Ea=function(e){return new Intl.NumberFormat("es-SV",{style:"currency",currency:"USD"}).format(e)},ya=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t?ha:ga;return ba(e.toDate().toLocaleDateString("es-SV",a))},va=function(){var e=Object(g.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.next=3,t.get().then((function(e){e.exists&&(a=e.data())}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ca=function(e){var t,a,o=e.codigoPago,c=Object(n.useState)({}),i=Object(Ee.a)(c,2),l=i[0],s=i[1],u=Object(n.useState)(!0),d=Object(Ee.a)(u,2),m=d[0],f=d[1];return Object(n.useEffect)((function(){f(!0);var e=I.firestore().collection("pagos").doc(o);va(e).then((function(e){return s(e)})).finally((function(){return f(!1)}))}),[o]),r.a.createElement(le.a,{key:"detail-modal",visible:e.visible,onCancel:e.handleCancel,title:r.a.createElement("div",null,"Detalle del pago"),footer:r.a.createElement(r.a.Fragment,null)},r.a.createElement(v.a,null,r.a.createElement(C.a,{flex:7},r.a.createElement($.a,{title:r.a.createElement(ne.b,null,"NPE: ",r.a.createElement("strong",null," ",(a=o,"".concat(a.substr(0,4)," ").concat(a.substr(4,4)," ").concat(a.substr(8,4)," ").concat(a.substr(12,4)," ").concat(a.substr(16,4)))," ")),bodyStyle:{height:325}},!m&&r.a.createElement("div",null,"Contrato:\xa0",r.a.createElement("strong",null,l.codigo_contrato),r.a.createElement("br",null),"Cliente:\xa0",r.a.createElement("strong",null,l.nombre_cliente),r.a.createElement("br",null),"Cantidad:\xa0",r.a.createElement("strong",null,Ea(l.cantidad)),r.a.createElement("br",null),"Mora:\xa0",r.a.createElement("strong",{style:l.mora_exonerada?{textDecoration:"line-through"}:{textDecoration:"none"}},Ea(l.mora)),r.a.createElement("br",null),"Cuota:\xa0",r.a.createElement("strong",null,l.numero_cuota," - ",ya(l.fecha_cuota)),r.a.createElement("br",null),"Fecha de pago:\xa0",r.a.createElement("strong",null,l.fecha_pago?ya(l.fecha_pago,!0):""),r.a.createElement("br",null),"Facturado:\xa0",l.facturado?r.a.createElement("strong",{style:{color:"#52c41a"}},"S\xed"):r.a.createElement("strong",{style:{color:"#165473"}},"No"),r.a.createElement("br",null),"Registrado por:\xa0",r.a.createElement("strong",null,(t=l.usuario,ba(t.split("@")[0]))))))))},_a=Q.a.Search,xa=le.a.confirm,ka=I.firestore(),Oa=function(e,t){return String(e).padStart(t,"0")},wa={year:"numeric",month:"numeric",day:"numeric"},Sa=function(e){return"string"!==typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)},Da=function(e){return Sa(e.split("@")[0])},ja=function(e){return new Intl.NumberFormat("es-SV",{style:"currency",currency:"USD"}).format(e)},Ia=function(e){var t=e.record,a=e.disabled,n=null,o=0,c=function(){var e=Object(g.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&La(n,t.fecha_cuota)&&(o=3),ka.collection("pagos").doc(a).get().then(function(){var e=Object(g.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.exists){e.next=5;break}return a=t.data(),t.ref.update({fecha_pago:n,mora:o}),e.next=5,ka.collection("contratos").doc(a.codigo_contrato).update({fecha_ultimo_mes_pagado:n}).catch((function(e){console.log(e)}));case 5:G.b.success("\xa1Fecha establecida correctamente!");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(ne.b,null,r.a.createElement(ft.a,{disabled:a,locale:pt.a,format:"DD-MMMM-YYYY",size:"small",onChange:function(e){n=e?new Date(e.get()):null}}),r.a.createElement(Rt.a,{onClick:function(){return c(t.key)},style:{color:"#389e0d"}}))},La=function(e,t){var a=e,n=t.toDate();return a.getYear()>n.getYear()||!(a.getYear()<n.getYear())&&(a.getMonth()>n.getMonth()||!(a.getMonth()<n.getMonth())&&a.getDate()>n.getDate())},Fa=function(e){return Sa(e.toDate().toLocaleDateString("es-SV",{year:"numeric",month:"short"}))},Na=function(e){return e?e.toDate():new Date},Ma=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).verDetalle=function(e){n.setState({registro:e,modalDetalle:!0})},n.hide=function(){n.setState({selectFechaVisible:!1})},n.handleVisibleChange=function(e){n.setState({selectFechaVisible:e})},n.obtenerRedes=function(e){var t=[];e.forEach((function(e){var a=e.data().numero;t.push({key:e.id,numero:a})})),n.setState({redes:t})},n.obtenerPagos=function(e){var t=[],a=n.state.busqueda;n.setState({loading:!0}),e.forEach((function(e){var n=e.data(),r=n.cantidad,o=n.facturado,c=n.codigo_contrato,i=n.nombre_cliente,l=n.numero_cuota,s=n.fecha_creacion,u=n.ref_cliente,d=n.fecha_cuota,m=n.fecha_pago,f=n.mora,p=n.mora_exonerada,g=n.usuario;a&&-1===c.toLowerCase().indexOf(a)&&-1===i.toLowerCase().indexOf(a)&&-1===Fa(d).toLowerCase().indexOf(a)&&-1===r.toString().indexOf(a)&&-1===g.toLowerCase().indexOf(a)||t.push({key:e.id,cantidad:r,codigo_contrato:c,nombre_cliente:i,numero_cuota:l,fecha_creacion:s,fecha_cuota:d,fecha_pago:m,mora:f,mora_exonerada:p,facturado:o,ref_cliente:u,usuario:g})})),n.setState({pagos:t,loading:!1})},n.columnas=n.asignarColumnas(),n.verDetalleContrato=function(e){n.setState({codigoContrato:e,detalleContrato:!0})},n.verDetalleCliente=function(e){n.setState({codigoCliente:e,detalleCliente:!0})},n.handleCancel=function(){n.setState({modalDetalle:!1,detalleCliente:!1,detalleContrato:!1})},n.agregarPago=function(){var e=Object(g.a)(p.a.mark((function e(t){var a,r,o,c,i,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.replace(/ /g,""),!/(\d{20})/.test(a)){e.next=14;break}return r=!1,o=!1,c=Number.parseInt(a.substr(0,4)),i=a.substr(5,3),l="R".concat(c,"-").concat(i,"-").concat(a.substr(8,4),"-").concat(a.substr(12,4)),e.next=9,n.refPagos.doc(a).get().then((function(e){e.exists&&(G.b.error("\xa1Esta cuota ya fue cancelada!"),r=!0)})).catch((function(e){console.log(e)}));case 9:if(!r){e.next=11;break}return e.abrupt("return");case 11:n.refContratos.doc(l).get().then(function(){var e=Object(g.a)(p.a.mark((function e(t){var r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.exists){e.next=18;break}if(r=t.data(),c=Number.parseInt(a.substr(17,4)),"activo"===r.estado){e.next=6;break}return G.b.error("No se pueden agregar pagos a este contrato"),e.abrupt("return");case 6:if(!(c>1)){e.next=15;break}return e.next=9,t.ref.collection("cuotas").doc("".concat(Oa(c-1,2))).get().then((function(e){e.data().cancelado&&(o=!0)}));case 9:if(o){e.next=12;break}return G.b.error("La cuota anterior no ha sido cancelada a\xfan"),e.abrupt("return");case 12:if(c!==r.cant_cuotas){e.next=15;break}return e.next=15,t.ref.update({estado:"finalizado"});case 15:t.ref.collection("cuotas").doc("".concat(Oa(c,2))).get().then((function(e){if(e.exists){var a=e.data();n.refPagos.doc(a.codigo).set({cantidad:a.cantidad,codigo_contrato:t.id,ref_cliente:r.ref_cliente,nombre_cliente:r.cliente,numero_cuota:e.id,fecha_cuota:a.fecha_pago,fecha_pago:null,mora:0,mora_exonerada:!1,facturado:!1,fecha_creacion:j.a.firestore.FieldValue.serverTimestamp(),usuario:n.state.user.email}).then((function(r){e.ref.update({cancelado:!0}).then((function(){n.setState({barcode:""}),G.b.success("Pago registrado")})),t.ref.update({ultima_cuota_pagada:e.id,ultimo_mes_pagado:a.fecha_pago,fecha_ultimo_mes_pagado:null})})).catch((function(e){G.b.error("Ocurri\xf3 un error, contacte con el administrador"),console.log(e)}))}})),e.next=19;break;case 18:G.b.error("La cuota NO existe");case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=15;break;case 14:G.b.warn("El formato del c\xf3digo no es v\xe1lido");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.exonerarMora=function(){var e=Object(g.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.refPagos.doc(t.key).update({mora_exonerada:!t.mora_exonerada}).then((function(){t.mora_exonerada?G.b.success("\xa1Se quit\xf3 la exoneraci\xf3n de la mora!"):G.b.success("\xa1Se exoner\xf3 la mora correctamente!")})).catch((function(e){console.log(e),G.b.error("Ocurri\xf3 un error")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.eliminar=function(){var e=Object(g.a)(p.a.mark((function e(t){var a,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!1,!t.facturado){e.next=4;break}return G.b.error("\xa1Este pago ya fue facturado!"),e.abrupt("return");case 4:return e.next=6,n.refContratos.doc(t.codigo_contrato).get().then(function(){var e=Object(g.a)(p.a.mark((function e(n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.exists){e.next=4;break}return r=Number.parseInt(t.numero_cuota),e.next=4,n.ref.collection("cuotas").doc(Oa(r+1,2)).get().then((function(e){e.exists&&e.data().cancelado&&(a=!0)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:if(!a){e.next=9;break}return G.b.error("Primero debe eliminar los pagos m\xe1s recientes"),e.abrupt("return");case 9:o=Object(h.a)(n),xa({title:"\xbfEst\xe1 seguro que desea eliminar este pago?",icon:r.a.createElement(me.a,null),content:"Eliminar pago",okText:"S\xed",cancelText:"No",onOk:function(){o.eliminarPago(t)}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.eliminarPago=function(){var e=Object(g.a)(p.a.mark((function e(t){var a,r,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Number.parseInt(t.numero_cuota),r=null,o=null,c=null,e.next=6,n.refPagos.doc("".concat(t.key)).delete().then((function(){n.refContratos.doc(t.codigo_contrato).get().then(function(){var e=Object(g.a)(p.a.mark((function e(i){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.exists){e.next=13;break}if("activo"===i.data().estado){e.next=5;break}return G.b.error("No se puede eliminar este pago porque el contrato no est\xe1 activo"),e.abrupt("return");case 5:return e.next=7,i.ref.collection("cuotas").doc(t.numero_cuota).get().then((function(e){e.exists&&e.ref.update({cancelado:!1}).then((function(){G.b.success("Pago eliminado")}))}));case 7:if(!(a>1)){e.next=10;break}return e.next=10,n.refPagos.doc("".concat(t.key.substr(0,16)).concat(Oa(a-1,4))).get().then((function(e){var t=e.data();o=t.fecha_cuota,c=t.fecha_pago,r=t.numero_cuota})).catch((function(e){console.log(e)}));case 10:i.ref.update({ultima_cuota_pagada:r,ultimo_mes_pagado:o,fecha_ultimo_mes_pagado:c}),e.next=14;break;case 13:G.b.error("La cuota NO existe");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.refPagos=ka.collection("pagos"),n.refRedes=I.firestore().collection("redes"),n.refContratos=ka.collection("contratos"),n.unsubscribe=null,n.state={user:e.user.user,busqueda:"",loading:!0,pagos:[],redes:[],barcode:"",codigoContrato:"",codigoCliente:"",registro:null,modalDetalle:!1,detalleContrato:!1,detalleCliente:!1,selectFechaVisible:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.refPagos.orderBy("fecha_creacion","desc").onSnapshot(this.obtenerPagos),this.refRedes.orderBy("numero").onSnapshot(this.obtenerRedes)}},{key:"buscar",value:function(e){var t=this;e.toLowerCase()!==this.state.busqueda&&(this.setState({busqueda:e.toLowerCase()}),this.refPagos.get().then((function(e){return t.obtenerPagos(e)})))}},{key:"asignarColumnas",value:function(){var e=this;return[{title:"Contrato",key:"codigo_contrato",sorter:function(e,t){return e.codigo_contrato.substr(1).localeCompare(t.codigo_contrato.substr(1))},filters:[],onFilter:function(e,t){return 0===t.codigo_contrato.indexOf(e)},render:function(t){return r.a.createElement(Z.a,{type:"link",onClick:function(){return e.verDetalleContrato(t.codigo_contrato)}},r.a.createElement("strong",null,t.codigo_contrato))}},{title:"Cliente",key:"nombre_cliente",sorter:function(e,t){return e.nombre_cliente.localeCompare(t.nombre_cliente)},render:function(t){return r.a.createElement(Z.a,{type:"link",onClick:function(){return e.verDetalleCliente(t.ref_cliente.id)}},r.a.createElement("strong",null,t.nombre_cliente))}},{title:"Cantidad",key:"cantidad",sorter:function(e,t){return e.cantidad.toString().localeCompare(t.cantidad.toString())},render:function(e){return r.a.createElement("strong",null,ja(e.cantidad))}},{title:"Cuota",key:"numero_cuota",sorter:function(e,t){return e.numero_cuota.localeCompare(t.numero_cuota)},render:function(e){return r.a.createElement(ne.b,null,"".concat(e.numero_cuota," - ").concat(Fa(e.fecha_cuota)))}},{title:"Fecha de pago",key:"fecha_pago",sorter:function(e,t){return Ge()(Na(e.fecha_pago)).unix()-Ge()(Na(t.fecha_pago)).unix()},render:function(e){return r.a.createElement(v.a,{justify:"center"},r.a.createElement(C.a,null,e.fecha_pago?" ".concat(Na(e.fecha_pago).toLocaleDateString("es-SV",wa)," "):"-",!e.facturado&&r.a.createElement(Ot.a,{content:r.a.createElement(Ia,{disabled:e.facturado,record:e}),title:"Seleccione",trigger:"click"},r.a.createElement(Ut.a,{disabled:e.facturado,style:{color:"#1c86c6"}}))))}},{title:"Mora",key:"mora",sorter:function(e,t){return e.mora.toString().localeCompare(t.mora.toString())},render:function(t){var a={textDecoration:"none"};return t.mora_exonerada&&(a.textDecoration="line-through"),r.a.createElement(ne.b,{size:"small"},r.a.createElement("strong",{style:a},ja(t.mora)),t.mora>0&&!t.facturado&&r.a.createElement(ue.a,{title:"Alternar exoneraci\xf3n"},r.a.createElement(Yt.a,{disabled:0===t.mora,key:"exonerate",onClick:function(){return e.exonerarMora(t)},style:{color:"#2124ce"}})))}},{title:"Facturado",key:"facturado",sorter:function(e,t){return e.facturado.toString().localeCompare(t.facturado.toString())},align:"center",render:function(e){return r.a.createElement(ne.b,null,e.facturado?r.a.createElement("strong",{style:{color:"#52c41a"}},"S\xed"):r.a.createElement("strong",{style:{color:"#165473"}},"No"))}},{title:"Usuario",key:"usuario",sorter:function(e,t){return Da(e.usuario).localeCompare(Da(t.usuario))},align:"center",render:function(e){return r.a.createElement("strong",null,Da(e.usuario))}},{title:"Opciones",key:"opciones",render:function(t){return r.a.createElement(ne.b,{size:"middle"},r.a.createElement(ue.a,{title:"Detalles"},r.a.createElement(Pt.a,{key:"info",onClick:function(){return e.verDetalle(t)},style:{color:"#0d9e8a"}})),r.a.createElement(ue.a,{title:"Cancelar"},r.a.createElement(pe.a,{key:"cancel",onClick:function(){return e.eliminar(t)},style:{color:"#f5222d"}})))}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.pagos,n=t.redes,o=t.loading,c=t.registro,i=t.modalDetalle,l=t.detalleContrato,s=t.detalleCliente,u=t.codigoContrato,d=t.codigoCliente;return r.a.createElement("div",null,i&&r.a.createElement(Ca,{visible:i,codigoPago:c.key,handleCancel:this.handleCancel}),r.a.createElement(de.a,{className:"site-page-header",title:"Pagos",subTitle:"Agregar pago",onBack:function(){return null},extra:[r.a.createElement(Q.a,{key:"1",addonBefore:r.a.createElement(Ht.a,null),placeholder:"Codigo de cuota",style:{width:280},autoFocus:!0,maxLength:24,allowClear:!0,value:this.state.barcode,onChange:function(t){return e.setState({barcode:t.target.value})},onKeyUp:function(t){13===t.keyCode&&e.agregarPago(t.target.value)}})]}),l&&r.a.createElement(qe,{visible:l,codigoContrato:u,handleCancel:this.handleCancel}),s&&r.a.createElement(Be,{visible:s,codigoCliente:d,handleCancel:this.handleCancel}),!this.columnas[0].filters.length&&n.map((function(t){e.columnas[0].filters.push({text:"Red ".concat(t.numero),value:"R".concat(t.numero)})})),r.a.createElement(be,{titulo:r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{justify:"space-between"},r.a.createElement(C.a,{span:4},r.a.createElement("strong",null,"Lista de pagos")),r.a.createElement(C.a,{span:4,offset:5},r.a.createElement(ne.b,null,r.a.createElement(_a,{placeholder:"Buscar",onSearch:function(t){return e.buscar(t)},style:{width:180}}))))),columnas:this.columnas,data:a,loading:o}))}}]),a}(n.Component);var Ra=Object(b.c)((function(e,t){return{user:e.user}}))(Ma),Pa=a(59),qa=a.n(Pa),Va=a(325),Ta=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).makeData=function(){n.seedCientes()},n.setAvailableIPs=Object(g.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.refIps.get().then((function(e){e.forEach((function(e){e.ref.update({libre:!0})}))})).catch((function(e){console.log("Error actualizando las redes: ",e)}));case 2:case"end":return e.stop()}}),e)}))),n.zeroPad=function(e,t){return String(e).padStart(t,"0")},n.seedRedes=function(){return console.log("Agregando redes"),new Promise((function(e,t){for(var a=function(a){n.refRedes.add({numero:a}).then((function(t){15===a&&e("Redes insertadas")})).catch((function(e){t(e)}))},r=14;r<22;r++)a(r)}))},n.seedIps=Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],console.log("Agregando IPs"),e.next=4,n.refRedes.get().then((function(e){e.forEach((function(e){var a=e.data();t.push({id:e.id,numero:a.numero})}))})).catch((function(e){console.log("Error obteniendo documentos: ",e)}));case 4:if(t.length){e.next=6;break}return e.abrupt("return");case 6:return e.abrupt("return",new Promise((function(e,a){for(var r=0;r<t.length;r++)for(var o=1;o<254;o++)n.refIps.doc("".concat(t[r].numero,"-").concat(o)).set({red:t[r].numero,numero:o,libre:!0}).then((function(a){2===t.length&&e("Direcciones IP insertadas")})).catch((function(e){a(e)}))})));case 7:case"end":return e.stop()}}),e)}))),n.seedCientes=function(){return console.log("Agregando clientes"),new Promise((function(e,t){for(var a=function(a){var r=qa.a.phone.phoneNumber("0#######-#"),o={dui:r,eliminado:!1,nombre:qa.a.name.firstName(),apellido:qa.a.name.lastName(),telefono:qa.a.phone.phoneNumber("####-####"),direccion:"".concat(qa.a.address.city()," ").concat(qa.a.address.direction()),fecha_creacion:j.a.firestore.FieldValue.serverTimestamp()};n.refClientes.doc(r).set(o).then((function(t){25===a&&e("Clientes insertados")})).catch((function(e){t(e)}))},r=1;r<=25;r++)a(r)}))},n.seedContratos=Object(g.a)(p.a.mark((function e(){var t,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=[],r=[],e.next=5,n.refRedes.get().then((function(e){e.forEach((function(e){var a=e.data();t.push({id:e.id,numero:a.numero})}))}));case 5:return e.next=7,n.refIps.get().then((function(e){e.forEach((function(e){var t=e.data();a.push({id:e.id,red:t.red,numero:t.numero})}))}));case 7:return e.next=9,n.refClientes.get().then((function(e){e.forEach((function(e){var t=e.data();r.push({id:e.id,dui:t.dui,nombre:t.nombre,apellido:t.apellido,ref:e.ref})}))}));case 9:return e.abrupt("return",new Promise((function(e,o){for(var c=function(e){var c=t[qa.a.random.number({min:0,max:t.length-1})],i=a[qa.a.random.number({min:0,max:a.length-1})],l=r[qa.a.random.number({min:0,max:r.length-1})],s=l.dui,u=qa.a.date.past(qa.a.random.number({min:0,max:5}),new Date),d=new Date(u);d.setMonth(d.getMonth()+17);var m=u.getMonth()+1,f=d.getMonth()+1,p="".concat(n.zeroPad(m,2)).concat(u.getFullYear().toString().substr(-2)),g="".concat(n.zeroPad(f,2)).concat(d.getFullYear().toString().substr(-2)),h={estado:"activo",cliente:"".concat(l.nombre," ").concat(l.apellido),codigo:"R".concat(c.numero,"-").concat(n.zeroPad(i.numero,3),"-").concat(p,"-").concat(g),cant_cuotas:18,dui_cliente:s,red:c.numero,ip:i.numero,fecha_ingreso:j.a.firestore.FieldValue.serverTimestamp(),fecha_inicio:u,fecha_fin:d,precio_cuota:qa.a.random.float({min:15,max:60}),velocidad:qa.a.random.number({min:1,max:50}),ref_cliente:l.ref};n.refContratos.doc("".concat(h.codigo)).set(h).then((function(){var e=h.codigo.split("-"),t=Number.parseInt(e[0].substr(1)),a=new Date(u);a.setMonth(a.getMonth()-1);for(var r=1;r<=18;r++){var o={codigo:"".concat(n.zeroPad(t,4),"-0").concat(e[1],"-").concat(h.codigo.substr(8),"-").concat(n.zeroPad(r,4)),cantidad:h.precio_cuota,fecha_pago:new Date(a.setMonth(a.getMonth()+1)),cancelado:!1};n.refContratos.doc("".concat(h.codigo)).collection("cuotas").doc("".concat(n.zeroPad(r,2))).set(o)}})).catch((function(e){o(e)}))},i=1;i<=25;i++)c()})));case 10:case"end":return e.stop()}}),e)}))),n.seedPagos=function(){},n.seedMantenimientos=Object(g.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],console.log("Agregando mantenimientos"),e.next=4,n.refContratos.get().then((function(e){e.forEach((function(e){var a=e.data();t.push({id:e.id,codigo:a.codigo,cliente:a.cliente,ref_cliente:a.ref_cliente,ref:e.ref})}))}));case 4:return e.abrupt("return",new Promise((function(e,a){for(var r=function(r){var o=t[qa.a.random.number({min:0,max:t.length-1})],c={fecha:qa.a.date.past(0,new Date),eliminado:!1,codigo_contrato:o.codigo,nombre_cliente:o.cliente,ref_cliente:o.ref_cliente,direccion:"".concat(qa.a.address.city()," ").concat(qa.a.address.direction()),motivo:qa.a.lorem.words(),descripcion:qa.a.lorem.paragraph(),fecha_creacion:j.a.firestore.FieldValue.serverTimestamp()};n.refMantenimientos.add(c).then((function(t){10===r&&e("Mantenimientos insertados")})).catch((function(e){a(e)}))},o=1;o<=10;o++)r(o)})));case 5:case"end":return e.stop()}}),e)}))),n.seedFacturas=Object(g.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=[],console.log("Agregando facturas"),e.next=5,n.refContratos.get().then((function(e){e.forEach((function(e){var a=e.data();t.push({id:e.id,codigo:a.codigo,cliente:a.cliente,ref_cliente:a.ref_cliente,ref:e.ref})}))}));case 5:t.forEach(function(){var e=Object(g.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.refPagos.where("codigo_contrato","==",t.codigo).get().then((function(e){e.forEach((function(e){var t=e.data(),n=t.cantidad,r=t.fecha_cuota,o=t.fecha_pago,c=t.numero_cuota,i=t.ref_cliente;a.push({id:e.id,cantidad:n,fecha_cuota:r,fecha_pago:o,numero_cuota:c,ref_cliente:i,ref:e.ref})}))})).catch((function(e){console.log(e)}));case 2:a.forEach((function(e){var a=e.fecha_cuota.toDate().toLocaleString("es-SV",{year:"numeric",month:"short"}),r={fecha:qa.a.date.past(0,new Date),cantidad_pagos:1,periodo:a,detalle:"Servicio de conexi\xf3n a internet de banda ancha, correspondiente al periodo de ".concat(a),precio_pago:e.cantidad,total:e.cantidad,total_letras:Va.default(e.cantidad),eliminado:!1,codigo_contrato:t.codigo,nombre_cliente:t.cliente,ref_cliente:t.ref_cliente,fecha_creacion:j.a.firestore.FieldValue.serverTimestamp()};n.refFacturas.add(r).then((function(t){e.ref.update({facturado:!0})})).catch((function(e){}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)}))),n.clearData=function(){var e=n.rollback(n.refRedes),t=n.rollback(n.refIps),a=n.rollback(n.refClientes),r=n.rollback(n.refContratos,"cuotas"),o=n.rollback(n.refPagos);return console.log("Estamos eliminando la info"),new Promise((function(n,c){Promise.all([e,t,a,r,o]).then((function(e){console.log("Se termin\xf3 de eliminar la info"),n(e)})).catch((function(e){c(e)}))}))},n.rollback=function(e,t){return console.log("Eliminando ".concat(e.path)),new Promise((function(a,n){e.get().then((function(n){n.forEach((function(a){t&&e.doc(a.id).collection(t).get().then((function(n){n.forEach((function(n){e.doc(a.id).collection(t).doc(n.id).delete()}))})),e.doc(a.id).delete()})),a("Ok")}))}))},n.name=qa.a.fake("{{name.firstName}} {{name.lastName}}"),n.firestore=I.firestore(),n.refRedes=n.firestore.collection("redes"),n.refIps=n.firestore.collection("ips"),n.refClientes=n.firestore.collection("clientes"),n.refContratos=n.firestore.collection("contratos"),n.refPagos=n.firestore.collection("pagos"),n.refMantenimientos=n.firestore.collection("mantenimientos"),n.refFacturas=n.firestore.collection("facturas"),n.state={redes:[],ips:[],clientes:[],contratos:[],pagos:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log("Componente cargado")}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:this.makeData},"Make data"),r.a.createElement("button",{onClick:this.clearData},"Clear data"),r.a.createElement("button",{onClick:this.setAvailableIPs},"Set Available IPs"))}}]),a}(n.Component),za=a(99),Ba=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),n=t.call(this,e),I.auth().onAuthStateChanged((function(e){n.props.dispatch(H(e))})),n}return Object(l.a)(a,[{key:"signedIn",value:function(){return this.props.user.user}},{key:"render",value:function(){return r.a.createElement(za.a,{history:this.props.history},r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/seed",component:Ta}),r.a.createElement(d.b,{exact:!0,path:"/login",component:ae}),this.signedIn()?null:r.a.createElement(d.a,{to:"/login"}),r.a.createElement(Y,null,r.a.createElement(d.b,{exact:!0,path:"/",component:nt}),r.a.createElement(d.b,{exact:!0,path:"/clientes",component:st}),r.a.createElement(d.b,{exact:!0,path:"/contratos",render:function(){return r.a.createElement(kt,null)}}),r.a.createElement(d.b,{exact:!0,path:"/pagos",component:Ra}),r.a.createElement(d.b,{exact:!0,path:"/facturas",component:pa}),r.a.createElement(d.b,{exact:!0,path:"/mantenimientos",component:Mt}))))}}]),a}(n.Component);var Aa=Object(b.c)((function(e,t){return{user:e.user}}))(Ba);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ua=a(170);var Ya={user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN":return{user:t.user};default:return e}}},Ha=a(484),Wa=a.n(Ha),Ga=a(444);var $a,Ka=a(128),Qa=Object(Ka.a)(),Ja=($a=Qa,Object(Ua.e)(function(e){return Object(Ua.c)(Object(ge.a)(Object(ge.a)({},Ya),{},{router:Object(za.b)(e)}))}($a),Object(Ua.d)(Object(Ua.a)(Object(Ga.a)($a)),Wa()("user"))));c.a.render(r.a.createElement(b.a,{store:Ja},r.a.createElement(Aa,{history:Qa})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},325:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return u}));var n=function(e){return"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1))};function r(e){switch(e){case 1:return"un";case 2:return"dos";case 3:return"tres";case 4:return"cuatro";case 5:return"cinco";case 6:return"seis";case 7:return"siete";case 8:return"ocho";case 9:return"nueve";default:return""}}function o(e){var t=Math.floor(e/10),a=e-10*t;switch(t){case 1:switch(a){case 0:return"diez";case 1:return"once";case 2:return"doce";case 3:return"trece";case 4:return"catorce";case 5:return"quince";default:return"dieci"+r(a)}case 2:switch(a){case 0:return"veinte";default:return"veinti"+r(a)}case 3:return c("treinta",a);case 4:return c("cuarenta",a);case 5:return c("cincuenta",a);case 6:return c("sesenta",a);case 7:return c("setenta",a);case 8:return c("ochenta",a);case 9:return c("noventa",a);case 0:return r(a);default:return""}}function c(e,t){return t>0?e+" Y "+r(t):e}function i(e){var t=Math.floor(e/100),a=e-100*t;switch(t){case 1:return a>0?"ciento "+o(a):"cien";case 2:return"doscientos "+o(a);case 3:return"trescientos "+o(a);case 4:return"cuatrocientos "+o(a);case 5:return"quinientos "+o(a);case 6:return"seiscientos "+o(a);case 7:return"setecientos "+o(a);case 8:return"ochocientos "+o(a);case 9:return"novecientos "+o(a);default:return o(a)}}function l(e,t,a,n){var r=Math.floor(e/t),o=e-r*t,c="";return r>0&&(c=r>1?i(r)+" "+n:a),o>0&&(c+=""),c}function s(e){var t=1e6,a=e-Math.floor(e/t)*t,n=l(e,t,"un mill\xf3n de","millones de"),r=function(e){var t=1e3,a=e-Math.floor(e/t)*t,n=l(e,t,"un mil","mil"),r=i(a);return""===n?r:n+" "+r}(a);return""===n?r:n+" "+r}function u(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a={numero:e,enteros:Math.floor(e),centavos:Math.round(100*e)-100*Math.floor(e),letrasCentavos:"",letrasMonedaPlural:"d\xf3lares",letrasMonedaSingular:"d\xf3lar"};return a.letrasCentavos="".concat(a.centavos,"/100"),t?0===a.enteros?"Cero ".concat(a.letrasCentavos," ").concat(a.letrasMonedaPlural):1===a.enteros?"".concat(n(s(a.enteros))," ").concat(a.letrasCentavos," ").concat(a.letrasMonedaSingular):"".concat(n(s(a.enteros))," ").concat(a.letrasCentavos," ").concat(a.letrasMonedaPlural):n(s(a.enteros))}},498:function(e,t,a){},499:function(e,t,a){},501:function(e,t,a){},502:function(e,t,a){},663:function(e,t){},665:function(e,t){},707:function(e,t){},708:function(e,t){}},[[2168,1,2]]]);
//# sourceMappingURL=main.9d87208c.chunk.js.map